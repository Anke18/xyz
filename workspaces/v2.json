{
    "title": "XYZ dev",
    "locales": {
        "NE": {
            "minZoom": 3,
            "maxZoom": 11,
            "layers": {
                "OSM": {
                    "format": "tiles",
                    "attribution": {
                        "Â© OpenStreetMap": "http://www.openstreetmap.org/copyright"
                    },
                    "URI": "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
                },
                "COUNTRIES": {
                    "attribution": {
                        "Made with Natural Earth.": "https://www.naturalearthdata.com/"
                    },
                    "format": "mvt",
                    "dbs": "XYZ",
                    "table": "dev.natural_earth_countries",
                    "tableview": {
                        "tables": {
                            "table1": {
                                "title": "Population / GDP",
                                "from": "dev.natural_earth_countries",
                                "columns": [
                                    {
                                        "field": "name",
                                        "type": "text"
                                    },
                                    {
                                        "title": "Population Est",
                                        "field": "pop_est",
                                        "type": "integer"
                                    },
                                    {
                                        "field": "gdp_md_est",
                                        "type": "integer"
                                    }
                                ]
                            },
                            "GDP / Population": {
                                "display": true,
                                "from": "dev.natural_earth_countries",
                                "columns": [
                                    {
                                        "field": "name",
                                        "type": "text"
                                    },
                                    {
                                        "field": "gdp_md_est",
                                        "type": "integer",
                                        "postfix": " dollars"
                                    },
                                    {
                                        "title": "Population Est",
                                        "field": "pop_est",
                                        "type": "integer"
                                    }
                                ]
                            }
                        }
                    },
                    "qID": "id",
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "label": "Name",
                            "field": "name",
                            "type": "text"
                        },
                        {
                            "label": "Population Est",
                            "field": "pop_est",
                            "type": "integer"
                        },
                        {
                            "label": "Population Est edit",
                            "field": "pop_est_edit",
                            "type": "integer",
                            "filter": "numeric",
                            "edit": true
                        },
                        {
                            "label": "GDP",
                            "field": "gdp_md_est",
                            "type": "integer",
                            "postfix": " dollars"
                        },
                        {
                            "label": "GDP edit",
                            "field": "gdp_md_est_edit",
                            "type": "integer",
                            "edit": true
                        },
                        {
                            "label": "Area SRID:3857",
                            "field": "area_",
                            "fieldfx": "ST_Area(geom_3857)",
                            "type": "integer"
                        },
                        {
                            "label": "Table 1",
                            "title": "Table 1",
                            "field": "table1",
                            "type": "table",
                            "columns": [
                                {
                                    "title": "rows",
                                    "field": "rows",
                                    "rows": {
                                        "age18_24": "'age18_24'",
                                        "age25_44": "'age25_44'",
                                        "total": "'total'"
                                    }
                                },
                                {
                                    "title": "min15",
                                    "field": "min15",
                                    "with": {
                                        "select": {
                                            "age18_24": "sum(b.age18_24)",
                                            "age25_44": "sum(b.age25_44)",
                                            "total": "sum(b.pop__17)"
                                        },
                                        "from": "shepherd_neame.sites a, gb_hx_1k b",
                                        "where": "a.id = 38 AND ST_INTERSECTS(a.isoline_15min, b.geomcntr)"
                                    },
                                    "rows": {
                                        "age18_24": "min15.age18_24",
                                        "age25_44": "min15.age25_44",
                                        "total": "min15.total"
                                    }
                                },
                                {
                                    "title": "uk",
                                    "field": "uk",
                                    "with": {
                                        "select": {
                                            "age18_24": "age_18to24_uk",
                                            "age25_44": "age_25to29_uk + age_30to44_uk",
                                            "total": "age_total_uk"
                                        },
                                        "from": "shepherd_neame.report_summary"
                                    },
                                    "rows": {
                                        "age18_24": "uk.age18_24",
                                        "age25_44": "uk.age25_44",
                                        "total": "uk.total"
                                    }
                                },
                                {
                                    "title": "pct_15",
                                    "field": "pct_15",
                                    "rows": {
                                        "age18_24": "min15.age18_24 / min15.total * 100",
                                        "age25_44": "min15.age25_44 / min15.total * 100",
                                        "total": "min15.total / min15.total * 100"
                                    }
                                },
                                {
                                    "title": "pct_uk",
                                    "field": "pct_uk",
                                    "rows": {
                                        "age18_24": "uk.age18_24 / uk.total * 100",
                                        "age25_44": "uk.age25_44 / uk.total * 100",
                                        "total": "uk.total / uk.total * 100"
                                    }
                                },
                                {
                                    "title": "index",
                                    "field": "index",
                                    "rows": {
                                        "age18_24": "(min15.age18_24 / min15.total) / (uk.age18_24 / uk.total) * 100",
                                        "age25_44": "(min15.age25_44 / min15.total) / (uk.age25_44 / uk.total) * 100",
                                        "total": "(min15.total / min15.total) / (uk.total / uk.total) * 100"
                                    }
                                }
                            ]
                        }
                    ],
                    "mvt_fields": [
                        "pop_est",
                        "pop_est_edit",
                        "gdp_md_est",
                        "gdp_md_est_edit::numeric / (pop_est_edit::numeric + 1) * 1000 as gdp_pp",
                        "(pop_est_edit / st_area(geom_3857)) * 1000 as pop_dens"
                    ],
                    "style": {
                        "default": {
                            "weight": 1,
                            "color": "#333333",
                            "fill": true,
                            "fillColor": "#ffffff",
                            "fillOpacity": 1
                        },
                        "highlight": {
                            "weight": 2,
                            "color": "#f50057",
                            "fill": true,
                            "fillColor": "#fce4ec",
                            "fillOpacity": 1
                        },
                        "themes": {
                            "Population": {
                                "type": "graduated",
                                "field": "pop_est_edit",
                                "cat": {
                                    "0": {
                                        "label": "0 to 10000",
                                        "fillColor": "#15773f"
                                    },
                                    "1000000": {
                                        "label": "1+ million",
                                        "fillColor": "#66bd63"
                                    },
                                    "10000000": {
                                        "label": "10+ million",
                                        "fillColor": "#a6d96a"
                                    },
                                    "25000000": {
                                        "label": "25+ million",
                                        "fillColor": "#d9ef8b"
                                    },
                                    "50000000": {
                                        "label": "50+ million",
                                        "fillColor": "#fdae61"
                                    },
                                    "100000000": {
                                        "label": "100+ million",
                                        "fillColor": "#f46d43"
                                    },
                                    "1000000000": {
                                        "label": "1+ billion",
                                        "fillColor": "#d73027"
                                    }
                                }
                            },
                            "GDP": {
                                "type": "graduated",
                                "field": "gdp_md_est",
                                "cat": {
                                    "0": {
                                        "label": "0",
                                        "fillColor": "#15773f"
                                    },
                                    "5000": {
                                        "label": "5000",
                                        "fillColor": "#66bd63"
                                    },
                                    "25000": {
                                        "label": "25000",
                                        "fillColor": "#a6d96a"
                                    },
                                    "75000": {
                                        "label": "75000",
                                        "fillColor": "#d9ef8b"
                                    },
                                    "250000": {
                                        "label": "250000",
                                        "fillColor": "#fdae61"
                                    },
                                    "500000": {
                                        "label": "500000",
                                        "fillColor": "#f46d43"
                                    },
                                    "1000000": {
                                        "label": "1000000",
                                        "fillColor": "#d73027"
                                    }
                                }
                            },
                            "GDP / Population": {
                                "type": "graduated",
                                "field": "gdp_pp",
                                "cat": {
                                    "1": {
                                        "label": "1",
                                        "fillColor": "#15773f"
                                    },
                                    "2.5": {
                                        "label": "2.5",
                                        "fillColor": "#66bd63"
                                    },
                                    "5": {
                                        "label": "5",
                                        "fillColor": "#a6d96a"
                                    },
                                    "10": {
                                        "label": "10",
                                        "fillColor": "#d9ef8b"
                                    },
                                    "25": {
                                        "label": "25",
                                        "fillColor": "#fdae61"
                                    },
                                    "50": {
                                        "label": "50",
                                        "fillColor": "#f46d43"
                                    },
                                    "100": {
                                        "label": "100",
                                        "fillColor": "#d73027"
                                    }
                                }
                            },
                            "Population Density": {
                                "type": "graduated",
                                "field": "pop_dens",
                                "cat": {
                                    "0": {
                                        "label": "0",
                                        "fillColor": "#15773f"
                                    },
                                    "0.01": {
                                        "label": "0.01",
                                        "fillColor": "#66bd63"
                                    },
                                    "0.025": {
                                        "label": "0.025",
                                        "fillColor": "#a6d96a"
                                    },
                                    "0.05": {
                                        "label": "0.05",
                                        "fillColor": "#d9ef8b"
                                    },
                                    "0.1": {
                                        "label": "0.1",
                                        "fillColor": "#fdae61"
                                    },
                                    "0.5": {
                                        "label": "0.5",
                                        "fillColor": "#f46d43"
                                    },
                                    "1": {
                                        "label": "1",
                                        "fillColor": "#d73027"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}