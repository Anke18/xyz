{
    "title": "XYZ dev",
    "locales": {
        "GB": {
            "gazetteer": {
                "provider": "GOOGLE",
                "code": "GB",
                "placeholder": "e.g. London",
                "datasets": [
                    {
                        "layer": "cluster",
                        "table": "dev_cluster",
                        "label": "postcode"
                    }
                ]
            },
            "bounds": {
                "north": 62,
                "east": 5,
                "south": 48,
                "west": -13
            },
            "minZoom": 6,
            "maxZoom": 17,
            "layers": {
                "OSM": {
                    "format": "tiles",
                    "URI": "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
                },
                "oa": {
                    "name": "Output areas",
                    "display": true,
                    "format": "mvt",
                    "dbs": "XYZ",
                    "tables": {
                        "14": "dev_oa"
                    },
                    "qID": "id",
                    "infoj": [
                        {
                            "label": "Population '11",
                            "field": "pop_11",
                            "type": "integer"
                        },
                        {
                            "label": "GRID pop__01",
                            "field": "pop__01",
                            "type": "integer",
                            "lookup": {
                                "layer": "grid",
                                "function": "AVG"
                            }
                        }
                    ]
                },
                "retail_places": {
                    "name": "Retail Places",
                    "display": true,
                    "format": "mvt",
                    "dbs": "XYZ",
                    "tables": {
                        "9": "dev_retailplaces"
                    },
                    "qID": "tid",
                    "infoj": [
                        {
                            "label": "ID",
                            "field": "id",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "label": "Name",
                            "field": "uniq_name",
                            "type": "text"
                        },
                        {
                            "label": "Competition Str.",
                            "field": "comp_strgh",
                            "type": "integer"
                        },
                        {
                            "label": "OA pop_11",
                            "field": "pop_11",
                            "type": "integer",
                            "lookup": {
                                "table": "dev_oa",
                                "geom": "geom",
                                "condition": "ST_INTERSECTS",
                                "function": "AVG"
                            }
                        },
                        {
                            "label": "Population '11",
                            "field": "pop__11",
                            "type": "integer"
                        },
                        {
                            "label": "Population '11",
                            "field": "pop__16",
                            "type": "integer",
                            "edit": true
                        },
                        {
                            "label": "Population 16 - 11",
                            "field": "pop_diff",
                            "fieldfx": "(pop__16 - pop__11)",
                            "type": "integer"
                        }
                    ]
                },
                "retail_points": {
                    "name": "Retail Points",
                    "display": true,
                    "format": "cluster",
                    "cluster_label": "store",
                    "dbs": "XYZ",
                    "qID": "id",
                    "table": "dev_retailpoints",
                    "infoj": [
                        {
                            "type": "streetview"
                        },
                        {
                            "label": "ID",
                            "field": "retailpoint_id",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "label": "Store",
                            "field": "store",
                            "type": "text"
                        },
                        {
                            "label": "Retailer",
                            "field": "retailer",
                            "type": "text"
                        },
                        {
                            "label": "Fascia",
                            "field": "fascia",
                            "type": "text"
                        },
                        {
                            "label": "Address"
                        },
                        {
                            "field": "address_1",
                            "type": "text",
                            "level": 1
                        },
                        {
                            "field": "address_2",
                            "type": "text",
                            "level": 1
                        },
                        {
                            "field": "locality",
                            "type": "text",
                            "level": 1
                        },
                        {
                            "field": "town",
                            "type": "text",
                            "level": 1
                        },
                        {
                            "label": "Postcode",
                            "field": "postcode",
                            "type": "text",
                            "level": 1,
                            "filter": "like"
                        },
                        {
                            "label": "RP competition",
                            "field": "comp_strgh",
                            "type": "integer",
                            "lookup": {
                                "table": "dev_retailplaces",
                                "geom": "geom",
                                "condition": "ST_INTERSECTS",
                                "function": "AVG"
                            }
                        },
                        {
                            "label": "OA pop_11",
                            "field": "pop_11",
                            "type": "integer",
                            "lookup": {
                                "table": "dev_oa",
                                "geom": "geom",
                                "condition": "ST_INTERSECTS",
                                "function": "SUM"
                            }
                        },
                        {
                            "field": "geom_rplace",
                            "fieldfx": "ST_asGeoJson(geom_rplace)",
                            "type": "geometry",
                            "style": {
                                "stroke": true,
                                "color": "#cf0",
                                "weight": 2,
                                "fill": true,
                                "fillOpacity": 0.5
                            }
                        },
                        {
                            "label": "GRID pop__01",
                            "field": "pop__01",
                            "type": "integer",
                            "lookup": {
                                "layer": "grid",
                                "function": "AVG",
                                "location_geom": "geom_rplace"
                            }
                        }
                    ]
                },
                "grid": {
                    "name": "Grid",
                    "format": "grid",
                    "dbs": "XYZ",
                    "geom": "geomcntr",
                    "grid_color": "pop__11",
                    "tables": {
                      "6": "gb_hx_64k",
                      "7": "gb_hx_32k",
                      "8": "gb_hx_16k",
                      "9": "gb_hx_8k",
                      "10": "gb_hx_4k",
                      "11": "gb_hx_2k",
                      "12": "gb_hx_1k"
                    },
                    "queryFields": [
                      {
                        "pop__01": "Population 2001"
                      },
                      {
                        "pop__11": "Population 2011"
                      },
                      {
                        "gen_female__11": "Female population"
                      },
                      {
                        "gen_male__11": "Male population"
                      }
                    ]
                  }
            }
        }
    }
}