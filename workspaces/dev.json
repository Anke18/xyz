{
    "title": "XYZ dev",
    "locales": {
        "NE": {
            "minZoom": 3,
            "maxZoom": 11,
            "layers": {
                "OSM": {
                    "group": "Base Layer",
                    "format": "tiles",
                    "attribution": {
                        "© OpenStreetMap": "http://www.openstreetmap.org/copyright"
                    },
                    "URI": "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
                },
                "Mapbox Base": {
                    "group": "Base Layer",
                    "display": true,
                    "name": "Mapbox Baselayer",
                    "attribution": {
                        "© Mapbox": "https://www.mapbox.com/about/maps",
                        "© OpenStreetMap": "http://www.openstreetmap.org/copyright"
                    },
                    "format": "tiles",
                    "URI": "https://api.mapbox.com/styles/v1/dbauszus/ciozrimi3002bdsm8bjtn2v1y/tiles/256/{z}/{x}/{y}?&provider=MAPBOX"
                },
                "COUNTRIES": {
                    "display": true,
                    "attribution": {
                        "Made with Natural Earth.": "https://www.naturalearthdata.com/"
                    },
                    "format": "mvt",
                    "dbs": "XYZ",
                    "table": "dev.natural_earth_countries",
                    "tableview": {
                        "tables": {
                            "table1": {
                                "title": "Population / GDP",
                                "from": "dev.natural_earth_countries",
                                "columns": [
                                    {
                                        "field": "name",
                                        "type": "text"
                                    },
                                    {
                                        "title": "Population Est",
                                        "field": "pop_est",
                                        "type": "integer"
                                    },
                                    {
                                        "field": "gdp_md_est",
                                        "type": "integer"
                                    }
                                ]
                            },
                            "GDP / Population": {
                                "display": true,
                                "from": "dev.natural_earth_countries",
                                "columns": [
                                    {
                                        "field": "name",
                                        "type": "text"
                                    },
                                    {
                                        "field": "gdp_md_est",
                                        "type": "integer",
                                        "postfix": " dollars"
                                    },
                                    {
                                        "title": "Population Est",
                                        "field": "pop_est",
                                        "type": "integer"
                                    }
                                ]
                            }
                        }
                    },
                    "qID": "id",
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "label": "Name",
                            "field": "name",
                            "type": "text"
                        },
                        {
                            "label": "Population Est",
                            "field": "pop_est",
                            "type": "integer"
                        },
                        {
                            "label": "Population Est edit",
                            "field": "pop_est_edit",
                            "type": "integer",
                            "filter": "numeric",
                            "edit": true
                        },
                        {
                            "label": "GDP",
                            "field": "gdp_md_est",
                            "type": "integer",
                            "postfix": " dollars"
                        },
                        {
                            "label": "GDP edit",
                            "field": "gdp_md_est_edit",
                            "type": "integer",
                            "edit": true
                        },
                        {
                            "label": "Area SRID:3857",
                            "field": "area_",
                            "fieldfx": "ST_Area(geom_3857)",
                            "type": "integer"
                        },
                        {
                            "label": "Table 1",
                            "title": "Table 1",
                            "field": "table1",
                            "type": "table",
                            "columns": [
                                {
                                  "title": "rows",
                                  "field": "rows",
                                  "rows": {
                                    "age18_24": "'age18_24'",
                                    "age25_44": "'age25_44'",
                                    "total": "'total'"
                                  }
                                },
                                {
                                  "title": "min15",
                                  "field": "min15",
                                  "with": {
                                    "select": {
                                      "age18_24": "sum(b.age18_24)",
                                      "age25_44": "sum(b.age25_44)",
                                      "total": "sum(b.pop__17)"
                                    },
                                    "from": "shepherd_neame.sites a, gb_hx_1k b",
                                    "where": "a.id = 38 AND ST_INTERSECTS(a.isoline_15min, b.geomcntr)"
                                  },
                                  "rows": {
                                    "age18_24": "min15.age18_24",
                                    "age25_44": "min15.age25_44",
                                    "total": "min15.total"
                                  }
                                },
                                {
                                  "title": "uk",
                                  "field": "uk",
                                  "with": {
                                    "select": {
                                      "age18_24": "age_18to24_uk",
                                      "age25_44": "age_25to29_uk + age_30to44_uk",
                                      "total": "age_total_uk"
                                    },
                                    "from": "shepherd_neame.report_summary"
                                  },
                                  "rows": {
                                    "age18_24": "uk.age18_24",
                                    "age25_44": "uk.age25_44",
                                    "total": "uk.total"
                                  }
                                },
                                {
                                  "title": "pct_15",
                                  "field": "pct_15",
                                  "rows": {
                                    "age18_24": "min15.age18_24 / min15.total * 100",
                                    "age25_44": "min15.age25_44 / min15.total * 100",
                                    "total": "min15.total / min15.total * 100"
                                  }
                                },
                                {
                                  "title": "pct_uk",
                                  "field": "pct_uk",
                                  "rows": {
                                    "age18_24": "uk.age18_24 / uk.total * 100",
                                    "age25_44": "uk.age25_44 / uk.total * 100",
                                    "total": "uk.total / uk.total * 100"
                                  }
                                },
                                {
                                  "title": "index",
                                  "field": "index",
                                  "rows": {
                                    "age18_24": "(min15.age18_24 / min15.total) / (uk.age18_24 / uk.total) * 100",
                                    "age25_44": "(min15.age25_44 / min15.total) / (uk.age25_44 / uk.total) * 100",
                                    "total": "(min15.total / min15.total) / (uk.total / uk.total) * 100"
                                  }
                                }
                            ]
                        }
                    ],
                    "mvt_fields": [
                        "pop_est",
                        "pop_est_edit",
                        "gdp_md_est",
                        "gdp_md_est_edit::numeric / (pop_est_edit::numeric + 1) * 1000 as gdp_pp",
                        "(pop_est_edit / st_area(geom_3857)) * 1000 as pop_dens"
                    ],
                    "style": {
                        "default": {
                            "weight": 1,
                            "color": "#333333",
                            "fill": true,
                            "fillColor": "#ffffff",
                            "fillOpacity": 1
                        },
                        "highlight": {
                            "weight": 2,
                            "color": "#f50057",
                            "fill": true,
                            "fillColor": "#fce4ec",
                            "fillOpacity": 1
                        },
                        "themes": {
                            "Population": {
                                "type": "graduated",
                                "field": "pop_est_edit",
                                "cat": {
                                    "0": {
                                        "label": "0 to 10000",
                                        "fillColor": "#15773f"
                                    },
                                    "1000000": {
                                        "label": "1+ million",
                                        "fillColor": "#66bd63"
                                    },
                                    "10000000": {
                                        "label": "10+ million",
                                        "fillColor": "#a6d96a"
                                    },
                                    "25000000": {
                                        "label": "25+ million",
                                        "fillColor": "#d9ef8b"
                                    },
                                    "50000000": {
                                        "label": "50+ million",
                                        "fillColor": "#fdae61"
                                    },
                                    "100000000": {
                                        "label": "100+ million",
                                        "fillColor": "#f46d43"
                                    },
                                    "1000000000": {
                                        "label": "1+ billion",
                                        "fillColor": "#d73027"
                                    }
                                }
                            },
                            "GDP": {
                                "type": "graduated",
                                "field": "gdp_md_est",
                                "cat": {
                                    "0": {
                                        "label": "0",
                                        "fillColor": "#15773f"
                                    },
                                    "5000": {
                                        "label": "5000",
                                        "fillColor": "#66bd63"
                                    },
                                    "25000": {
                                        "label": "25000",
                                        "fillColor": "#a6d96a"
                                    },
                                    "75000": {
                                        "label": "75000",
                                        "fillColor": "#d9ef8b"
                                    },
                                    "250000": {
                                        "label": "250000",
                                        "fillColor": "#fdae61"
                                    },
                                    "500000": {
                                        "label": "500000",
                                        "fillColor": "#f46d43"
                                    },
                                    "1000000": {
                                        "label": "1000000",
                                        "fillColor": "#d73027"
                                    }
                                }
                            },
                            "GDP / Population": {
                                "type": "graduated",
                                "field": "gdp_pp",
                                "cat": {
                                    "1": {
                                        "label": "1",
                                        "fillColor": "#15773f"
                                    },
                                    "2.5": {
                                        "label": "2.5",
                                        "fillColor": "#66bd63"
                                    },
                                    "5": {
                                        "label": "5",
                                        "fillColor": "#a6d96a"
                                    },
                                    "10": {
                                        "label": "10",
                                        "fillColor": "#d9ef8b"
                                    },
                                    "25": {
                                        "label": "25",
                                        "fillColor": "#fdae61"
                                    },
                                    "50": {
                                        "label": "50",
                                        "fillColor": "#f46d43"
                                    },
                                    "100": {
                                        "label": "100",
                                        "fillColor": "#d73027"
                                    }
                                }
                            },
                            "Population Density": {
                                "type": "graduated",
                                "field": "pop_dens",
                                "cat": {
                                    "0": {
                                        "label": "0",
                                        "fillColor": "#15773f"
                                    },
                                    "0.01": {
                                        "label": "0.01",
                                        "fillColor": "#66bd63"
                                    },
                                    "0.025": {
                                        "label": "0.025",
                                        "fillColor": "#a6d96a"
                                    },
                                    "0.05": {
                                        "label": "0.05",
                                        "fillColor": "#d9ef8b"
                                    },
                                    "0.1": {
                                        "label": "0.1",
                                        "fillColor": "#fdae61"
                                    },
                                    "0.5": {
                                        "label": "0.5",
                                        "fillColor": "#f46d43"
                                    },
                                    "1": {
                                        "label": "1",
                                        "fillColor": "#d73027"
                                    }
                                }
                            }
                        }
                    }
                },
                "TILES": {
                    "format": "mvt",
                    "dbs": "XYZ",
                    "table": "dev.natural_earth_countries__mvts",
                    "geom_3857": "tile",
                    "style": {
                        "default": {
                            "weight": 1,
                            "color": "#333333",
                            "fill": true,
                            "fillColor": "#ffffff",
                            "fillOpacity": 0.1
                        },
                        "highlight": {
                            "weight": 2,
                            "color": "#f50057",
                            "fill": true,
                            "fillColor": "#fce4ec",
                            "fillOpacity": 1
                        }
                    }
                },
                "Mapbox Label": {
                    "group": "Base Layer",
                    "format": "tiles",
                    "attribution": {
                        "© Mapbox": "https://www.mapbox.com/about/maps",
                        "© OpenStreetMap": "http://www.openstreetmap.org/copyright"
                    },
                    "URI": "https://api.mapbox.com/styles/v1/dbauszus/cj9puo8pr5o0c2sovhdwhkc7z/tiles/256/{z}/{x}/{y}?&provider=MAPBOX"
                }
            }
        },
        "Offices": {
            "showScaleBar": true,
            "minZoom": 2,
            "maxZoom": 18,
            "view": {
                "lat": 45,
                "lng": 60,
                "z": 3
            },
            "gazetteer": {
                "provider": "GOOGLE",
                "placeholder": "e.g. London"
            },
            "layers": {
                "OSM": {
                    "group": "Base Layer",
                    "format": "tiles",
                    "attribution": {
                        "© OpenStreetMap": "http://www.openstreetmap.org/copyright"
                    },
                    "URI": "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
                },
                "Mapbox Base": {
                    "group": "Base Layer",
                    "display": true,
                    "name": "Mapbox Baselayer",
                    "attribution": {
                        "© Mapbox": "https://www.mapbox.com/about/maps",
                        "© OpenStreetMap": "http://www.openstreetmap.org/copyright"
                    },
                    "format": "tiles",
                    "URI": "https://api.mapbox.com/styles/v1/dbauszus/ciozrimi3002bdsm8bjtn2v1y/tiles/256/{z}/{x}/{y}?&provider=MAPBOX"
                },
                "offices": {
                    "format": "geojson",
                    "dbs": "XYZ",
                    "table": "glx_offices",
                    "style": {
                        "default": {
                            "marker": {
                                "type": "markerColor",
                                "style": {
                                    "colorMarker": "#999999",
                                    "colorDot": "#333333"
                                },
                                "iconAnchor": [
                                    20,
                                    40
                                ]
                            }
                        },
                        "selected": {
                            "marker": {
                                "type": "markerColor",
                                "style": {
                                    "colorMarker": "#64dd17",
                                    "colorDot": "#33691e"
                                },
                                "iconAnchor": [
                                    20,
                                    40
                                ]
                            }
                        }
                    },
                    "qID": "id",
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "label": "Address HTML",
                            "field": "address_html",
                            "fieldfx": "address",
                            "type": "html"
                        }
                    ]
                },
                "Mapbox Label": {
                    "group": "Base Layer",
                    "format": "tiles",
                    "attribution": {
                        "© Mapbox": "https://www.mapbox.com/about/maps",
                        "© OpenStreetMap": "http://www.openstreetmap.org/copyright"
                    },
                    "URI": "https://api.mapbox.com/styles/v1/dbauszus/cj9puo8pr5o0c2sovhdwhkc7z/tiles/256/{z}/{x}/{y}?&provider=MAPBOX"
                }
            }
        },
        "GB": {
            "showScaleBar": true,
            "locate": {},
            "minZoom": 5,
            "maxZoom": 17,
            "bounds": {
                "north": 62,
                "east": 5,
                "south": 48,
                "west": -13
            },
            "maskBounds": true,
            "gazetteer": {
                "provider": "GOOGLE",
                "code": "GB",
                "placeholder": "e.g. London",
                "datasets": [
                    {
                        "layer": "retail_points",
                        "table": "dev.retailpoints",
                        "label": "store"
                    }
                ]
            },
            "layers": {
                "OSM": {
                    "group": "Base Layer",
                    "format": "tiles",
                    "attribution": {
                        "© OpenStreetMap": "http://www.openstreetmap.org/copyright"
                    },
                    "URI": "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
                },
                "Mapbox Base": {
                    "group": "Base Layer",
                    "display": true,
                    "name": "Mapbox Baselayer",
                    "attribution": {
                        "© Mapbox": "https://www.mapbox.com/about/maps",
                        "© OpenStreetMap": "http://www.openstreetmap.org/copyright"
                    },
                    "format": "tiles",
                    "URI": "https://api.mapbox.com/styles/v1/dbauszus/ciozrimi3002bdsm8bjtn2v1y/tiles/256/{z}/{x}/{y}?&provider=MAPBOX"
                },
                "cluster_catchments": {
                    "format": "cluster",
                    "meta": "<p>100% Seamless UK definitions of natural markets at 4 levels, local, towns, district and region. Close match to true ‘markets’ at multiple scales.</p><br><p><a class=\"docu_link\" href=\"https://drive.google.com/file/d/0B1GCK8cPXzg-TGdzNzA4VUY4TGs\" target=\"_blank\"><i class=\"icon-file-pdf\"></i> Documentation</a></p>",
                    "dbs": "XYZ",
                    "table": "dev.cluster_catchments",
                    "edit": {
                        "point": true,
                        "delete": true
                    },
                    "qID": "id",
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "label": "Catchment Geometry",
                            "name": "Show / Hide",
                            "field": "catchment",
                            "fieldfx": "ST_asGeoJson(catchment)",
                            "type": "geometry",
                            "style": {
                                "fill": true,
                                "fillColor": "#c62828",
                                "fillOpacity": 0.2
                            }
                        },
                        {
                            "label": "Catchment Here",
                            "name": "Create / Delete",
                            "field": "isoline_here",
                            "fieldfx": "ST_asGeoJson(isoline_here)",
                            "type": "geometry",
                            "edit": {
                                "isoline_here": {
                                    "minutes": 10
                                }
                            }
                        },
                        {
                            "label": "Catchment Mapbox",
                            "name": "Create / Delete",
                            "field": "isoline_mapbox",
                            "fieldfx": "ST_asGeoJson(isoline_mapbox)",
                            "type": "geometry",
                            "edit": {
                                "isoline_mapbox": {
                                    "minutes": 10
                                }
                            },
                            "style": {
                                "stroke": true,
                                "color": "#ffb300",
                                "weight": 2,
                                "fill": true,
                                "fillColor": "#ffb300",
                                "fillOpacity": 0.2
                            }
                        }
                    ]
                },
                "edit_layer": {
                    "format": "mvt",
                    "dbs": "XYZ",
                    "table": "dev.scratch",
                    "mvt_cache": "dev.scratch__mvts",
                    "qID": "id",
                    "edit": {
                        "polygon": true,
                        "circle": true,
                        "rectangle": true,
                        "line": true,
                        "point": true,
                        "isoline_mapbox": true,
                        "isoline_here": true,
                        "delete": true
                    },
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "label": "Images",
                            "field": "images",
                            "type": "images",
                            "edit": true
                        },
                        {
                            "label": "Date:",
                            "field": "dev_date",
                            "type": "date",
                            "edit": true
                        },
                        {
                            "label": "Options",
                            "field": "dev_options",
                            "type": "text",
                            "edit": {
                                "options": [
                                  "Open",
                                  "Closed",
                                  {
                                    "Other": "text"
                                  }
                                ]
                              }
                        }
                    ]
                },
                "oa": {
                    "name": "Output areas",
                    "attribution": {
                        "© ONS": "https://www.ons.gov.uk"
                    },
                    "format": "mvt",
                    "dbs": "XYZ",
                    "tables": {
                        "11": null,
                        "12": "dev.oa",
                        "13": "dev.oa"
                    },
                    "mvt_cache": "dev.oa__mvts",
                    "mvt_fields": [
                        "pop_11"
                    ],
                    "style": {
                        "themes": {
                            "Population '11": {
                                "type": "graduated",
                                "field": "pop_11",
                                "cat": {
                                    "0": {
                                        "label": "0 to 10000",
                                        "fillColor": "#15773f"
                                    },
                                    "100": {
                                        "label": "10000 to 25000",
                                        "fillColor": "#66bd63"
                                    },
                                    "200": {
                                        "label": "25000 to 50000",
                                        "fillColor": "#a6d96a"
                                    },
                                    "300": {
                                        "label": "50000 to 100000",
                                        "fillColor": "#d9ef8b"
                                    },
                                    "400": {
                                        "label": "100000 to 250000",
                                        "fillColor": "#fdae61"
                                    },
                                    "500": {
                                        "label": "250000 to 500000",
                                        "fillColor": "#f46d43"
                                    },
                                    "600": {
                                        "label": "500000 or more",
                                        "fillColor": "#d73027"
                                    }
                                }
                            }
                        }
                    },
                    "qID": "id",
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "label": "OA Code",
                            "field": "oacode",
                            "type": "text",
                            "inline": true,
                            "filter": "like"
                        },
                        {
                            "label": "Population '11",
                            "field": "pop_11",
                            "type": "integer",
                            "filter": "numeric",
                            "edit": true
                        }
                    ]
                },
                "retail_places": {
                    "name": "Retail Places",
                    "format": "mvt",
                    "dbs": "XYZ",
                    "tables": {
                        "8": null,
                        "9": "dev.retailplaces"
                    },
                    "tableview": {
                        "tables": {
                            "Retail Places": {
                                "from": "dev.retailplaces",
                                "columns": [
                                    {
                                        "title": "ID",
                                        "field": "id",
                                        "type": "text"
                                    },
                                    {
                                        "field": "dev_date",
                                        "type": "date"
                                    },
                                    {
                                        "field": "rp_type",
                                        "type": "text"
                                    }
                                ]
                            }
                        }
                    },
                    "mvt_cache": "dev.retailplaces__mvts",
                    "mvt_fields": [
                        "rp_type",
                        "pop__11"
                    ],
                    "style": {
                        "themes": {
                            "Retail Place type": {
                                "type": "categorized",
                                "field": "rp_type",
                                "other": true,
                                "cat": {
                                    "Major City Centre": {
                                        "label": "Major City Centre",
                                        "color": "#EF271B",
                                        "fillColor": "#EF271B"
                                    },
                                    "City Centre": {
                                        "label": "City Centre",
                                        "color": "#BA2D0B",
                                        "fillColor": "#BA2D0B"
                                    },
                                    "Large Town Centre": {
                                        "label": "Large Town Centre",
                                        "color": "#FE4E00",
                                        "fillColor": "#FE4E00"
                                    },
                                    "Major Urban Centre": {
                                        "label": "Major Urban Centre",
                                        "color": "#E2711D",
                                        "fillColor": "#E2711D"
                                    },
                                    "Town Centre": {
                                        "label": "Town Centre",
                                        "color": "#F3A712",
                                        "fillColor": "#F3A712"
                                    },
                                    "Urban Centre": {
                                        "label": "Urban Centre",
                                        "color": "#FADF63",
                                        "fillColor": "#FADF63"
                                    },
                                    "Small Town Centre": {
                                        "label": "Small Town Centre",
                                        "color": "#FFE74C",
                                        "fillColor": "#FFE74C"
                                    },
                                    "Village Centre": {
                                        "label": "Village Centre",
                                        "color": "#DBFE87",
                                        "fillColor": "#DBFE87"
                                    },
                                    "Regional SC": {
                                        "label": "Regional SC",
                                        "color": "#8ED081",
                                        "fillColor": "#8ED081"
                                    },
                                    "Outlet Centre": {
                                        "label": "Outlet Centre",
                                        "color": "#7DDF64",
                                        "fillColor": "#7DDF64"
                                    },
                                    "Shopping Park": {
                                        "label": "Shopping Park",
                                        "color": "#074F57",
                                        "fillColor": "#074F57"
                                    },
                                    "Retail Park": {
                                        "label": "Retail Park",
                                        "color": "#32746D",
                                        "fillColor": "#32746D"
                                    },
                                    "Leisure Park": {
                                        "label": "Leisure Park",
                                        "color": "#41D3BD",
                                        "fillColor": "#41D3BD"
                                    },
                                    "Local Hub": {
                                        "label": "Local Hub",
                                        "color": "#08B2E3",
                                        "fillColor": "#08B2E3"
                                    },
                                    "Large Parade": {
                                        "label": "Large Parade",
                                        "color": "#1F487E",
                                        "fillColor": "#1F487E"
                                    },
                                    "Parade": {
                                        "label": "Parade",
                                        "color": "#541388",
                                        "fillColor": "#541388"
                                    },
                                    "Weak Parade": {
                                        "label": "Weak Parade",
                                        "color": "#D90368",
                                        "fillColor": "#D90368"
                                    }
                                }
                            },
                            "Population '11": {
                                "type": "graduated",
                                "field": "pop__11",
                                "cat": {
                                    "0": {
                                        "label": "0 to 10000",
                                        "fillColor": "#15773f"
                                    },
                                    "10000": {
                                        "label": "10000 to 25000",
                                        "fillColor": "#66bd63"
                                    },
                                    "25000": {
                                        "label": "25000 to 50000",
                                        "fillColor": "#a6d96a"
                                    },
                                    "50000": {
                                        "label": "50000 to 100000",
                                        "fillColor": "#d9ef8b"
                                    },
                                    "100000": {
                                        "label": "100000 to 250000",
                                        "fillColor": "#fdae61"
                                    },
                                    "250000": {
                                        "label": "250000 to 500000",
                                        "fillColor": "#f46d43"
                                    },
                                    "500000": {
                                        "label": "500000 or more",
                                        "fillColor": "#d73027"
                                    }
                                }
                            }
                        }
                    },
                    "qID": "tid",
                    "filter": {
                        "infoj": [
                            {
                                "label": "ID count",
                                "field": "id_count",
                                "type": "integer",
                                "inline": true,
                                "fieldfx": "count(id)"
                            }
                        ]
                    },
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "label": "ID",
                            "field": "id",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "label": "Date edit",
                            "field": "dev_date",
                            "type": "date",
                            "edit": "true",
                            "filter": "date"
                        },
                        {
                            "label": "Date",
                            "field": "dev_date_",
                            "fieldfx": "dev_date",
                            "type": "date"
                        },
                        {
                            "label": "RP Type",
                            "field": "rp_type",
                            "type": "text",
                            "filter": {
                                "in": [
                                    "Major City Centre",
                                    "Large Town Centre",
                                    "Village Centre",
                                    "Weak Parade"
                                ]
                            }
                        },
                        {
                            "label": "Name",
                            "field": "uniq_name",
                            "type": "text"
                        },
                        {
                            "label": "Competition Str.",
                            "field": "comp_strgh",
                            "type": "integer",
                            "prefix": "£ "
                        },
                        {
                            "label": "OA pop_11",
                            "field": "pop__11",
                            "type": "integer",
                            "lookup": {
                                "table": "dev_oa",
                                "geom": "geom",
                                "condition": "ST_INTERSECTS",
                                "function": "AVG"
                            }
                        },
                        {
                            "label": "Population",
                            "type": "group",
                            "chart": {
                                "x": "label x",
                                "y": "label y",
                                "active": true
                            },
                            "expanded": true
                        },
                        {
                            "group": "Population",
                            "label": "Population '11",
                            "field": "pop__11",
                            "type": "integer"
                        },
                        {
                            "group": "Population",
                            "label": "Population '12",
                            "field": "pop__12",
                            "type": "integer"
                        },
                        {
                            "group": "Population",
                            "label": "Population '13",
                            "field": "pop__13",
                            "type": "integer"
                        },
                        {
                            "group": "Population",
                            "label": "Population '14",
                            "field": "pop__14",
                            "type": "integer"
                        },
                        {
                            "group": "Population",
                            "label": "Population '15",
                            "field": "pop__15",
                            "type": "integer"
                        },
                        {
                            "group": "Population",
                            "label": "Population '16",
                            "field": "pop__16",
                            "type": "integer"
                        },
                        {
                            "label": "Population 16 - 11",
                            "field": "pop_diff",
                            "fieldfx": "(pop__16 - pop__11)",
                            "type": "integer"
                        }
                    ]
                },
                "retail_points": {
                    "roles": {
                        "a" : null,
                        "foo" : {
                            "retailer": {
                                "in": [
                                    "Tesco",
                                    "Sainsburys"
                                ]
                            }
                        }
                    },
                    "display": true,
                    "name": "Retail Points",
                    "format": "cluster",
                    "cluster_label": "store",
                    "dbs": "XYZ",
                    "qID": "id",
                    "table": "dev.retailpoints",
                    "tableview": {
                        "tables": {
                            "Retail Points": {
                                "display": true,
                                "from": "dev.retailpoints",
                                "columns": [
                                    {
                                        "title": "ID",
                                        "field": "retailpoint_id",
                                        "type": "text"
                                    },
                                    {
                                        "title": "Retailer",
                                        "field": "retailer",
                                        "type": "text"
                                    },
                                    {
                                        "title": "Fascia",
                                        "field": "fascia",
                                        "type": "text"
                                    }
                                ]
                            }
                        }
                    },
                    "filter": {
                        "infoj": [
                            {
                                "label": "ID count",
                                "field": "id_count",
                                "type": "integer",
                                "inline": true,
                                "fieldfx": "count(retailpoint_id)"
                            }
                        ]
                    },
                    "style": {
                        "themes": {
                            "Retailer": {
                                "type": "categorized",
                                "field": "retailer",
                                "other": true,
                                "cat": {
                                    "Tesco": {
                                        "label": "Tesco",
                                        "fillColor": "#0055a8",
                                        "layers": {
                                            "0.75": "#ffffff",
                                            "0.35": "#f02f26"
                                        }
                                    },
                                    "Sainsburys": {
                                        "label": "Sainsbury's",
                                        "fillColor": "#ee8a00",
                                        "layers": {
                                            "0.5": "#ffffff",
                                            "0.35": "#ee8a00"
                                        }
                                    },
                                    "Marks and Spencer": {
                                        "label": "Marks & Spencer",
                                        "fillColor": "#0a0d10",
                                        "layers": {
                                            "0.5": "#def036",
                                            "0.25": "#0a0d10"
                                        }
                                    }
                                }
                            },
                            "Households": {
                                "type": "graduated",
                                "field": "hhdooc_11",
                                "cat": {
                                    "0": {
                                        "label": "0 to 100",
                                        "fillColor": "#15773f"
                                    },
                                    "100": {
                                        "label": "100 to 200",
                                        "fillColor": "#66bd63"
                                    },
                                    "200": {
                                        "label": "200 to 400",
                                        "fillColor": "#a6d96a"
                                    },
                                    "400": {
                                        "label": "400 to 600",
                                        "fillColor": "#d9ef8b"
                                    },
                                    "600": {
                                        "label": "600 to 800",
                                        "fillColor": "#fdae61"
                                    },
                                    "800": {
                                        "label": "800 to 1000",
                                        "fillColor": "#f46d43"
                                    },
                                    "1000": {
                                        "label": "1000 or more",
                                        "fillColor": "#d73027"
                                    }
                                }
                            },
                            "Households Sized": {
                                "type": "graduated",
                                "field": "hhdooc_11",
                                "size": "hhdooc_11",
                                "cat": {
                                    "0": {
                                        "label": "0 to 100",
                                        "fillColor": "#15773f"
                                    },
                                    "100": {
                                        "label": "100 to 200",
                                        "fillColor": "#66bd63"
                                    },
                                    "200": {
                                        "label": "200 to 400",
                                        "fillColor": "#a6d96a"
                                    },
                                    "400": {
                                        "label": "400 to 600",
                                        "fillColor": "#d9ef8b"
                                    },
                                    "600": {
                                        "label": "600 to 800",
                                        "fillColor": "#fdae61"
                                    },
                                    "800": {
                                        "label": "800 to 1000",
                                        "fillColor": "#f46d43"
                                    },
                                    "1000": {
                                        "label": "1000 or more",
                                        "fillColor": "#d73027"
                                    }
                                }
                            },
                            "Tesco/Sainsbury's": {
                                "type": "competition",
                                "field": "retailer",
                                "other": true,
                                "cat": {
                                    "Tesco": {
                                        "label": "Tesco",
                                        "fillColor": "#0055a8"
                                    },
                                    "Sainsburys": {
                                        "label": "Sainsbury's",
                                        "fillColor": "#ee8a00"
                                    }
                                }
                            }
                        }
                    },
                    "infoj": [
                        {
                            "type": "streetview"
                        },
                        {
                            "type": "key"
                        },
                        {
                            "label": "ID",
                            "field": "retailpoint_id",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "label": "Store",
                            "field": "store",
                            "type": "text"
                        },
                        {
                            "label": "Retailer",
                            "field": "retailer",
                            "type": "text"
                        },
                        {
                            "label": "Fascia",
                            "field": "fascia",
                            "type": "text"
                        },
                        {
                            "label": "Address"
                        },
                        {
                            "field": "address_1",
                            "type": "text",
                            "level": 1
                        },
                        {
                            "field": "address_2",
                            "type": "text",
                            "level": 1
                        },
                        {
                            "field": "locality",
                            "type": "text",
                            "level": 1
                        },
                        {
                            "field": "town",
                            "type": "text",
                            "level": 1
                        },
                        {
                            "label": "Postcode",
                            "field": "postcode",
                            "type": "text",
                            "level": 1,
                            "filter": "like"
                        },
                        {
                            "label": "Households",
                            "field": "hhdooc_11",
                            "type": "integer"
                        }
                    ]
                },
                "sites": {
                    "edit": {
                        "properties": true,
                        "point": true,
                        "delete": true
                    },
                    "name": "Sites",
                    "format": "cluster",
                    "geom": "geom_4326",
                    "dbs": "XYZ",
                    "qID": "id",
                    "table": "shepherd_neame.sites",
                    "cluster_label": "pub_name",
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "field": "pub_name",
                            "label": "Site Name",
                            "edit": true,
                            "inline": true
                        },
                        {
                            "label": "Drivetimes",
                            "type": "label"
                        },
                        {
                            "name": "HERE Catchment 5min",
                            "field": "isoline_5min",
                            "fieldfx": "ST_asGeoJson(isoline_5min)",
                            "type": "geometry",
                            "edit": {
                                "isoline_here": {
                                    "minutes": 5
                                }
                            },
                            "style": {
                                "stroke": true,
                                "color": "#BB0A21",
                                "weight": 2,
                                "fill": true,
                                "fillOpacity": 0.2
                            }
                        },
                        {
                            "label": "Population Growth % (2011-17)",
                            "field": "pop_growth_11_17_5min",
                            "fieldfx": "SUM(b.pop__17 - b.pop__11) * 100 / SUM(b.pop__11)",
                            "level": 1,
                            "type": "numeric",
                            "lookup": {
                                "table_a": "shepherd_neame.sites",
                                "table_b": "gb_hx_1k",
                                "geom_a": "isoline_5min",
                                "geom_b": "geomcntr"
                            }
                        },
                        {
                            "label": "Competitors 5min",
                            "field": "comp_5min",
                            "fieldfx": "COUNT(b.glxid)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "shepherd_neame.sites",
                                "table_b": "shepherd_neame.food_beverage",
                                "geom_a": "isoline_5min",
                                "geom_b": "geom"
                            }
                        },
                        {
                            "label": "field_withSelect",
                            "field": "field_withSelect",
                            "fieldfx": "comp_5min * pop_growth_11_17_5min",
                            "level": 1,
                            "type": "numeric",
                            "withSelect": true
                        },
                        {
                            "type": "orderedList",
                            "title": "Nearest competitors",
                            "display": true,
                            "table": "shepherd_neame.food_beverage",
                            "geom": "geom",
                            "columns": [
                                {
                                    "title": "Competitor name",
                                    "field": "fascia"
                                },
                                {
                                  "title": "Category",
                                  "field": "rlcategory"
                                },
                                {
                                  "title": "Postcode",
                                  "field": "postcode"
                                },
                                {
                                  "title": "Retail place type",
                                  "field": "rp_type"
                                },
                                {
                                  "type": "integer",
                                  "geography": true,
                                  "title": "Distance (m)",
                                  "fx": "ST_DISTANCE",
                                  "field": "dist",
                                  "orderby": true
                                }
                              ],
                              "order": "ASC",
                              "limit": 8
                            }
                    ],
                    "style": {
                        "marker": {
                            "type": "target",
                            "fillColor": "#2364AA",
                            "layers": {
                                "0.75": "#EEE",
                                "0.50": "#2364AA"
                            }
                        },
                        "markerMulti": {
                            "type": "target",
                            "fillColor": "#2364AA",
                            "layers": {
                                "0.75": "#EEE",
                                "0.50": "#2364AA"
                            }
                        }
                    }
                },
                "poi": {
                    "name": "Points of Interest",
                    "meta": "A subset of collection of points of interest across the UK including healthcare locations, law and order sites along with sport & leisure facilities, car parks, cinemas and service areas.",
                    "attribution": [
                        "Point of Interest. Geolytix License."
                    ],
                    "format": "cluster",
                    "dbs": "XYZ",
                    "table": "mapp.poi",
                    "qID": "id",
                    "geom": "geom_4326",
                    "cluster_label": "poi_name",
                    "cluster_kmeans": 0.1,
                    "cluster_dbscan": 0.05,
                    "infoj": [
                        {
                            "field": "poi_type",
                            "label": "Category",
                            "inline": true
                        },
                        {
                            "field": "poi_name",
                            "label": "Name",
                            "inline": true
                        },
                        {
                            "field": "poi_fascia",
                            "label": "Brand",
                            "inline": true
                        },
                        {
                            "field": "poi_flag",
                            "label": "Type",
                            "inline": true
                        },
                        {
                            "field": "poi_address",
                            "label": "Address",
                            "inline": true
                        },
                        {
                            "field": "postcode",
                            "label": "Postcode",
                            "inline": true
                        },
                        {
                            "field": "town",
                            "label": "Town",
                            "inline": true
                        },
                        {
                            "field": "locality",
                            "label": "locality",
                            "inline": true
                        },
                        {
                            "type": "streetview"
                        }
                    ],
                    "style": {
                        "markerMin": 40,
                        "anchor": [20, 40],
                        "marker": {
                            "type": "target",
                            "fillColor": "#C2095A"
                        },
                        "markerMulti": {
                            "type": "target",
                            "fillColor": "#C2095A"
                        },
                        "themes": {
                            "POI Type": {
                                "field": "poi_type",
                                "type": "categorized",
                                "other": true,
                                "cat": {
                                    "Airport": {
                                        "label": "Airport",
                                        "svg": "https://raw.githubusercontent.com/GEOLYTIX/MapIcons/master/poi_pin_filled/poi_transport_airport.svg?sanitize=true"
                                    },
                                    "Cinema": {
                                        "label": "Cinema",
                                        "svg": "https://raw.githubusercontent.com/GEOLYTIX/MapIcons/master/poi_pin_filled/poi_entertainment_cinema.svg?sanitize=true"
                                    },
                                    "Hospital": {
                                        "label": "Hospital",
                                        "svg": "https://raw.githubusercontent.com/GEOLYTIX/MapIcons/master/poi_pin_filled/poi_health_hospital.svg?sanitize=true"
                                    },
                                    "Pharmacy": {
                                        "label": "Pharmacy",
                                        "svg": "https://raw.githubusercontent.com/GEOLYTIX/MapIcons/master/poi_pin_filled/poi_health_pharmacy.svg?sanitize=true"
                                    },
                                    "Sport and Leisure": {
                                        "label": "Sport and Leisure",
                                        "svg": "https://raw.githubusercontent.com/GEOLYTIX/MapIcons/master/poi_pin_filled/poi_sports_leisure_sports_centre.svg?sanitize=true"
                                    },
                                    "Stadium": {
                                        "label": "Stadium",
                                        "svg": "https://raw.githubusercontent.com/GEOLYTIX/MapIcons/master/poi_pin_filled/poi_entertainment_stadium.svg?sanitize=true"
                                    }
                                }
                            }
                        }
                    }
                },
                "grid": {
                    "name": "Grid",
                    "attribution": {
                        "© ONS": "https://www.ons.gov.uk"
                    },
                    "format": "grid",
                    "dbs": "XYZ",
                    "geom": "geomcntr",
                    "tables": {
                        "7": null,
                        "8": "gb_hx_16k",
                        "9": "gb_hx_8k",
                        "10": "gb_hx_4k",
                        "11": "gb_hx_2k",
                        "12": "gb_hx_1k",
                        "13": "gb_hx_1k",
                        "14": null
                    },
                    "grid_fields": {
                        "Population 2001": "pop__01",
                        "Population 2011": "pop__11",
                        "Female population": "gen_female__11",
                        "Male population": "gen_male__11"
                    }
                },
                "Mapbox Label": {
                    "group": "Base Layer",
                    "format": "tiles",
                    "attribution": {
                        "© Mapbox": "https://www.mapbox.com/about/maps",
                        "© OpenStreetMap": "http://www.openstreetmap.org/copyright"
                    },
                    "URI": "https://api.mapbox.com/styles/v1/dbauszus/cj9puo8pr5o0c2sovhdwhkc7z/tiles/256/{z}/{x}/{y}?&provider=MAPBOX"
                }
            }
        },
        "Shanghai": {
            "minZoom": 3,
            "maxZoom": 15,
            "view": {
                "lat": 31.23,
                "lng": 121.468,
                "z": 14
            },
            "layers": {
                "Mapbox Base": {
                    "display": true,
                    "attribution": {
                        "© Mapbox": "https://www.mapbox.com/about/maps",
                        "© OpenStreetMap": "http://www.openstreetmap.org/copyright"
                    },
                    "format": "tiles",
                    "URI": "https://api.mapbox.com/styles/v1/dbauszus/ciozrimi3002bdsm8bjtn2v1y/tiles/256/{z}/{x}/{y}?&provider=MAPBOX"
                },
                "Retail Places": {
                    "display": true,
                    "dbs": "XYZ",
                    "format": "mvt",
                    "geom_3857": "geom_3857",
                    "table": "shanghai_retail_places",
                    "style": {
                        "default": {
                            "weight": 1,
                            "color": "#9c27b0",
                            "fill": true,
                            "fillColor": "#9c27b0",
                            "fillOpacity": 0.1
                        }
                    },
                    "qID": "id",
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "label": "rpid",
                            "field": "rpid",
                            "type": "numeric"
                        },
                        {
                            "label": "rpname_eng",
                            "field": "rpname_eng",
                            "type": "numeric"
                        },
                        {
                            "label": "rpname_chn",
                            "field": "rpname_chn",
                            "type": "numeric"
                        }
                    ]
                },
                "Retail Venues": {
                    "display": true,
                    "dbs": "XYZ",
                    "format": "mvt",
                    "geom_3857": "geom_3857",
                    "table": "shanghai_retail_venues",
                    "style": {
                        "default": {
                            "weight": 2,
                            "color": "#ffc107",
                            "fill": true,
                            "fillColor": "#ffc107",
                            "fillOpacity": 0.4
                        }
                    },
                    "qID": "id",
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "label": "vname_eng",
                            "field": "vname_eng",
                            "type": "text"
                        },
                        {
                            "label": "vname_chn",
                            "field": "vname_chn",
                            "type": "text"
                        },
                        {
                            "label": "vtype",
                            "field": "vtype",
                            "type": "text"
                        },
                        {
                            "label": "vaddress",
                            "field": "vaddress",
                            "type": "text"
                        },
                        {
                            "label": "inmall",
                            "field": "inmall",
                            "type": "numeric"
                        },
                        {
                            "label": "rid",
                            "field": "rid",
                            "type": "numeric"
                        },
                        {
                            "label": "vid",
                            "field": "vid",
                            "type": "numeric"
                        }
                    ]
                },
                "Flagships": {
                    "display": true,
                    "dbs": "XYZ",
                    "format": "cluster",
                    "geom": "geom_4326",
                    "table": "cn_glx_geodata_shanghai_flagships",
                    "style": {
                        "markerMin": 30,
                        "markerMax": 50,
                        "marker": {
                            "type": "target",
                            "fillColor": "#aeea00"
                        },
                        "markerMulti": {
                            "type": "target",
                            "fillColor": "#aeea00"
                        }
                    },
                    "qID": "id",
                    "infoj": [
                        {
                            "type": "key"
                        },
                        {
                            "label": "brand_flagship",
                            "field": "brand_flagship",
                            "type": "text"
                        }
                    ]
                },
                "Mapbox Label": {
                    "display": true,
                    "attribution": {
                        "© Mapbox": "https://www.mapbox.com/about/maps",
                        "© OpenStreetMap": "http://www.openstreetmap.org/copyright"
                    },
                    "format": "tiles",
                    "URI": "https://api.mapbox.com/styles/v1/dbauszus/cj9puo8pr5o0c2sovhdwhkc7z/tiles/256/{z}/{x}/{y}?&provider=MAPBOX"
                }
            }
        }
    }
}