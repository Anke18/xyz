{
    "title": "XYZ dev",
    "locales": {
        "NE": {
            "minZoom": 3,
            "maxZoom": 11,
            "layers": {
                "OSM": {
                    "group": "Base Layer",
                    "format": "tiles",
                    "attribution": {
                        "© OpenStreetMap": "http://www.openstreetmap.org/copyright"
                    },
                    "URI": "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
                },
                "Mapbox Base": {
                    "group": "Base Layer",
                    "display": true,
                    "name": "Mapbox Baselayer",
                    "attribution": {
                        "© Mapbox": "https://www.mapbox.com/about/maps",
                        "© OpenStreetMap": "http://www.openstreetmap.org/copyright"
                    },
                    "format": "tiles",
                    "URI": "https://api.mapbox.com/styles/v1/dbauszus/ciozrimi3002bdsm8bjtn2v1y/tiles/256/{z}/{x}/{y}?&provider=MAPBOX"
                },
                "COUNTRIES": {
                    "display": true,
                    "attribution": {
                        "Made with Natural Earth.": "https://www.naturalearthdata.com/"
                    },
                    "format": "mvt",
                    "dbs": "XYZ",
                    "table": "dev.natural_earth_countries",
                    "tableview": {
                        "tables": {
                            "table1": {
                                "title": "Population / GDP",
                                "from": "dev.natural_earth_countries",
                                "columns": [{
                                        "field": "name",
                                        "type": "text"
                                    },
                                    {
                                        "title": "Population Est",
                                        "field": "pop_est",
                                        "type": "integer"
                                    },
                                    {
                                        "field": "gdp_md_est",
                                        "type": "integer"
                                    }
                                ]
                            },
                            "GDP / Population": {
                                "display": true,
                                "from": "dev.natural_earth_countries",
                                "columns": [{
                                        "field": "name",
                                        "type": "text"
                                    },
                                    {
                                        "field": "gdp_md_est",
                                        "type": "integer",
                                        "postfix": " dollars"
                                    },
                                    {
                                        "title": "Population Est",
                                        "field": "pop_est",
                                        "type": "integer"
                                    }
                                ]
                            }
                        }
                    },
                    "qID": "id",
                    "hover": {
                        "field": "pop_est"
                    },
                    "infoj": [{
                            "type": "key"
                        },
                        {
                            "label": "Name",
                            "field": "name",
                            "type": "text"
                        },
                        {
                            "label": "Population Est",
                            "field": "pop_est",
                            "type": "integer"
                        },
                        {
                            "label": "Population Est edit",
                            "field": "pop_est_edit",
                            "type": "integer",
                            "filter": "numeric",
                            "edit": true
                        },
                        {
                            "label": "GDP",
                            "field": "gdp_md_est",
                            "type": "integer",
                            "postfix": " dollars"
                        },
                        {
                            "label": "GDP edit",
                            "field": "gdp_md_est_edit",
                            "type": "integer",
                            "edit": true
                        },
                        {
                            "label": "Area SRID:3857",
                            "field": "area_",
                            "fieldfx": "ST_Area(geom_3857)",
                            "type": "integer"
                        },
                        {
                            "label": "Table 1",
                            "title": "Table 1",
                            "field": "table1",
                            "type": "table",
                            "columns": [{
                                    "title": "rows",
                                    "field": "rows",
                                    "rows": {
                                        "age18_24": "'age18_24'",
                                        "age25_44": "'age25_44'",
                                        "total": "'total'"
                                    }
                                },
                                {
                                    "title": "min15",
                                    "field": "min15",
                                    "with": {
                                        "select": {
                                            "age18_24": "sum(b.age18_24)",
                                            "age25_44": "sum(b.age25_44)",
                                            "total": "sum(b.pop__17)"
                                        },
                                        "from": "shepherd_neame.sites a, gb_hx_1k b",
                                        "where": "a.id = 38 AND ST_INTERSECTS(a.isoline_15min, b.geomcntr)"
                                    },
                                    "rows": {
                                        "age18_24": "min15.age18_24",
                                        "age25_44": "min15.age25_44",
                                        "total": "min15.total"
                                    }
                                },
                                {
                                    "title": "uk",
                                    "field": "uk",
                                    "with": {
                                        "select": {
                                            "age18_24": "age_18to24_uk",
                                            "age25_44": "age_25to29_uk + age_30to44_uk",
                                            "total": "age_total_uk"
                                        },
                                        "from": "shepherd_neame.report_summary"
                                    },
                                    "rows": {
                                        "age18_24": "uk.age18_24",
                                        "age25_44": "uk.age25_44",
                                        "total": "uk.total"
                                    }
                                },
                                {
                                    "title": "pct_15",
                                    "field": "pct_15",
                                    "rows": {
                                        "age18_24": "min15.age18_24 / min15.total * 100",
                                        "age25_44": "min15.age25_44 / min15.total * 100",
                                        "total": "min15.total / min15.total * 100"
                                    }
                                },
                                {
                                    "title": "pct_uk",
                                    "field": "pct_uk",
                                    "rows": {
                                        "age18_24": "uk.age18_24 / uk.total * 100",
                                        "age25_44": "uk.age25_44 / uk.total * 100",
                                        "total": "uk.total / uk.total * 100"
                                    }
                                },
                                {
                                    "title": "index",
                                    "field": "index",
                                    "rows": {
                                        "age18_24": "(min15.age18_24 / min15.total) / (uk.age18_24 / uk.total) * 100",
                                        "age25_44": "(min15.age25_44 / min15.total) / (uk.age25_44 / uk.total) * 100",
                                        "total": "(min15.total / min15.total) / (uk.total / uk.total) * 100"
                                    }
                                }
                            ]
                        }
                    ],
                    "mvt_fields": [
                        "pop_est",
                        "pop_est_edit",
                        "gdp_md_est",
                        "gdp_md_est_edit::numeric / (pop_est_edit::numeric + 1) * 1000 as gdp_pp",
                        "(pop_est_edit / st_area(geom_3857)) * 1000 as pop_dens"
                    ],
                    "style": {
                        "default": {
                            "weight": 1,
                            "color": "#333333",
                            "fill": true,
                            "fillColor": "#ffffff",
                            "fillOpacity": 1
                        },
                        "highlight": {
                            "weight": 2,
                            "color": "#f50057",
                            "fill": true,
                            "fillColor": "#fce4ec",
                            "fillOpacity": 1
                        },
                        "themes": {
                            "Population": {
                                "type": "graduated",
                                "field": "pop_est_edit",
                                "cat": {
                                    "0": {
                                        "label": "0 to 10000",
                                        "fillColor": "#15773f"
                                    },
                                    "1000000": {
                                        "label": "1+ million",
                                        "fillColor": "#66bd63"
                                    },
                                    "10000000": {
                                        "label": "10+ million",
                                        "fillColor": "#a6d96a"
                                    },
                                    "25000000": {
                                        "label": "25+ million",
                                        "fillColor": "#d9ef8b"
                                    },
                                    "50000000": {
                                        "label": "50+ million",
                                        "fillColor": "#fdae61"
                                    },
                                    "100000000": {
                                        "label": "100+ million",
                                        "fillColor": "#f46d43"
                                    },
                                    "1000000000": {
                                        "label": "1+ billion",
                                        "fillColor": "#d73027"
                                    }
                                }
                            },
                            "GDP": {
                                "type": "graduated",
                                "field": "gdp_md_est",
                                "cat": {
                                    "0": {
                                        "label": "0",
                                        "fillColor": "#15773f"
                                    },
                                    "5000": {
                                        "label": "5000",
                                        "fillColor": "#66bd63"
                                    },
                                    "25000": {
                                        "label": "25000",
                                        "fillColor": "#a6d96a"
                                    },
                                    "75000": {
                                        "label": "75000",
                                        "fillColor": "#d9ef8b"
                                    },
                                    "250000": {
                                        "label": "250000",
                                        "fillColor": "#fdae61"
                                    },
                                    "500000": {
                                        "label": "500000",
                                        "fillColor": "#f46d43"
                                    },
                                    "1000000": {
                                        "label": "1000000",
                                        "fillColor": "#d73027"
                                    }
                                }
                            },
                            "GDP / Population": {
                                "type": "graduated",
                                "field": "gdp_pp",
                                "cat": {
                                    "1": {
                                        "label": "1",
                                        "fillColor": "#15773f"
                                    },
                                    "2.5": {
                                        "label": "2.5",
                                        "fillColor": "#66bd63"
                                    },
                                    "5": {
                                        "label": "5",
                                        "fillColor": "#a6d96a"
                                    },
                                    "10": {
                                        "label": "10",
                                        "fillColor": "#d9ef8b"
                                    },
                                    "25": {
                                        "label": "25",
                                        "fillColor": "#fdae61"
                                    },
                                    "50": {
                                        "label": "50",
                                        "fillColor": "#f46d43"
                                    },
                                    "100": {
                                        "label": "100",
                                        "fillColor": "#d73027"
                                    }
                                }
                            },
                            "Population Density": {
                                "type": "graduated",
                                "field": "pop_dens",
                                "cat": {
                                    "0": {
                                        "label": "0",
                                        "fillColor": "#15773f"
                                    },
                                    "0.01": {
                                        "label": "0.01",
                                        "fillColor": "#66bd63"
                                    },
                                    "0.025": {
                                        "label": "0.025",
                                        "fillColor": "#a6d96a"
                                    },
                                    "0.05": {
                                        "label": "0.05",
                                        "fillColor": "#d9ef8b"
                                    },
                                    "0.1": {
                                        "label": "0.1",
                                        "fillColor": "#fdae61"
                                    },
                                    "0.5": {
                                        "label": "0.5",
                                        "fillColor": "#f46d43"
                                    },
                                    "1": {
                                        "label": "1",
                                        "fillColor": "#d73027"
                                    }
                                }
                            }
                        }
                    }
                },
                "TILES": {
                    "format": "mvt",
                    "dbs": "XYZ",
                    "table": "dev.natural_earth_countries__mvts",
                    "geom_3857": "tile",
                    "style": {
                        "default": {
                            "weight": 1,
                            "color": "#333333",
                            "fill": true,
                            "fillColor": "#ffffff",
                            "fillOpacity": 0.1
                        },
                        "highlight": {
                            "weight": 2,
                            "color": "#f50057",
                            "fill": true,
                            "fillColor": "#fce4ec",
                            "fillOpacity": 1
                        }
                    }
                },
                "Mapbox Label": {
                    "group": "Base Layer",
                    "format": "tiles",
                    "attribution": {
                        "© Mapbox": "https://www.mapbox.com/about/maps",
                        "© OpenStreetMap": "http://www.openstreetmap.org/copyright"
                    },
                    "URI": "https://api.mapbox.com/styles/v1/dbauszus/cj9puo8pr5o0c2sovhdwhkc7z/tiles/256/{z}/{x}/{y}?&provider=MAPBOX"
                }
            }
        },
        "Offices": {
            "showScaleBar": true,
            "minZoom": 2,
            "maxZoom": 18,
            "view": {
                "lat": 45,
                "lng": 60,
                "z": 3
            },
            "gazetteer": {
                "provider": "GOOGLE",
                "placeholder": "e.g. London"
            },
            "layers": {
                "OSM": {
                    "group": "Base Layer",
                    "format": "tiles",
                    "attribution": {
                        "© OpenStreetMap": "http://www.openstreetmap.org/copyright"
                    },
                    "URI": "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
                },
                "Mapbox Base": {
                    "group": "Base Layer",
                    "display": true,
                    "name": "Mapbox Baselayer",
                    "attribution": {
                        "© Mapbox": "https://www.mapbox.com/about/maps",
                        "© OpenStreetMap": "http://www.openstreetmap.org/copyright"
                    },
                    "format": "tiles",
                    "URI": "https://api.mapbox.com/styles/v1/dbauszus/ciozrimi3002bdsm8bjtn2v1y/tiles/256/{z}/{x}/{y}?&provider=MAPBOX"
                },
                "Offices": {
                    "format": "geojson",
                    "dbs": "XYZ",
                    "table": "glx_offices",
                    "style": {
                        "default": {
                            "marker": {
                                "type": "markerColor",
                                "style": {
                                    "colorMarker": "#999999",
                                    "colorDot": "#333333"
                                },
                                "iconAnchor": [
                                    20,
                                    40
                                ]
                            }
                        },
                        "selected": {
                            "marker": {
                                "type": "markerColor",
                                "style": {
                                    "colorMarker": "#64dd17",
                                    "colorDot": "#33691e"
                                },
                                "iconAnchor": [
                                    20,
                                    40
                                ]
                            }
                        }
                    },
                    "hover": {
                        "field": "address"
                    },
                    "qID": "id",
                    "infoj": [{
                            "type": "key"
                        },
                        {
                            "label": "Address",
                            "field": "address",
                            "type": "html"
                        }
                    ]
                },
                "Mapbox Label": {
                    "group": "Base Layer",
                    "format": "tiles",
                    "attribution": {
                        "© Mapbox": "https://www.mapbox.com/about/maps",
                        "© OpenStreetMap": "http://www.openstreetmap.org/copyright"
                    },
                    "URI": "https://api.mapbox.com/styles/v1/dbauszus/cj9puo8pr5o0c2sovhdwhkc7z/tiles/256/{z}/{x}/{y}?&provider=MAPBOX"
                }
            }
        },
        "GB": {
            "showScaleBar": true,
            "locate": {},
            "minZoom": 5,
            "maxZoom": 17,
            "bounds": {
                "north": 62,
                "east": 5,
                "south": 48,
                "west": -13
            },
            "maskBounds": true,
            "gazetteer": {
                "provider": "GOOGLE",
                "code": "GB",
                "placeholder": "e.g. London",
                "datasets": [{
                    "layer": "retail_points",
                    "table": "dev.retailpoints",
                    "label": "store"
                }]
            },
            "layers": {
                "OSM": {
                    "group": "Base Layer",
                    "format": "tiles",
                    "attribution": {
                        "© OpenStreetMap": "http://www.openstreetmap.org/copyright"
                    },
                    "URI": "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
                },
                "Mapbox Base": {
                    "group": "Base Layer",
                    "display": true,
                    "name": "Mapbox Baselayer",
                    "attribution": {
                        "© Mapbox": "https://www.mapbox.com/about/maps",
                        "© OpenStreetMap": "http://www.openstreetmap.org/copyright"
                    },
                    "format": "tiles",
                    "URI": "https://api.mapbox.com/styles/v1/dbauszus/ciozrimi3002bdsm8bjtn2v1y/tiles/256/{z}/{x}/{y}?&provider=MAPBOX"
                },
                "cluster_catchments": {
                    "format": "cluster",
                    "meta": "<p>100% Seamless UK definitions of natural markets at 4 levels, local, towns, district and region. Close match to true ‘markets’ at multiple scales.</p><br><p><a class=\"docu_link\" href=\"https://drive.google.com/file/d/0B1GCK8cPXzg-TGdzNzA4VUY4TGs\" target=\"_blank\"><i class=\"icon-file-pdf\"></i> Documentation</a></p>",
                    "dbs": "XYZ",
                    "table": "dev.cluster_catchments",
                    "edit": {
                        "point": true,
                        "delete": true
                    },
                    "qID": "id",
                    "infoj": [{
                            "type": "key"
                        },
                        {
                            "label": "Catchment Geometry",
                            "name": "Show / Hide",
                            "field": "catchment",
                            "fieldfx": "ST_asGeoJson(catchment)",
                            "type": "geometry",
                            "style": {
                                "fill": true,
                                "fillColor": "#c62828",
                                "fillOpacity": 0.2
                            }
                        },
                        {
                            "label": "Catchment Here",
                            "name": "Create / Delete",
                            "field": "isoline_here",
                            "fieldfx": "ST_asGeoJson(isoline_here)",
                            "type": "geometry",
                            "edit": {
                                "isoline_here": {
                                    "minutes": 10
                                }
                            }
                        },
                        {
                            "label": "Catchment Mapbox",
                            "name": "Create / Delete",
                            "field": "isoline_mapbox",
                            "fieldfx": "ST_asGeoJson(isoline_mapbox)",
                            "type": "geometry",
                            "edit": {
                                "isoline_mapbox": {
                                    "minutes": 10
                                }
                            },
                            "style": {
                                "stroke": true,
                                "color": "#ffb300",
                                "weight": 2,
                                "fill": true,
                                "fillColor": "#ffb300",
                                "fillOpacity": 0.2
                            }
                        }
                    ]
                },
                "edit_layer": {
                    "format": "mvt",
                    "dbs": "XYZ",
                    "table": "dev.scratch",
                    "mvt_cache": "dev.scratch__mvts",
                    "qID": "id",
                    "edit": {
                        "polygon": true,
                        "circle": true,
                        "rectangle": true,
                        "line": true,
                        "point": true,
                        "isoline_mapbox": true,
                        "isoline_here": true,
                        "delete": true
                    },
                    "infoj": [{
                            "type": "key"
                        },
                        {
                            "label": "Images",
                            "field": "images",
                            "type": "images",
                            "edit": true
                        },
                        {
                            "label": "Date:",
                            "field": "dev_date",
                            "type": "date",
                            "edit": true
                        },
                        {
                            "label": "Options",
                            "field": "dev_options",
                            "type": "text",
                            "edit": {
                                "options": [
                                    "Open",
                                    "Closed",
                                    {
                                        "Other": "text"
                                    }
                                ]
                            }
                        }
                    ],
                    "style": {
                        "default": {
                            "weight": 1,
                            "color": "#083D77",
                            "fill": true,
                            "fillColor": "#083D77",
                            "fillOpacity": 0.3
                        },
                        "highlight": {
                            "color": "#F78764",
                            "fill": true,
                            "fillOpacity": 0.2
                        }
                    }
                },
                "oa": {
                    "name": "Output areas",
                    "attribution": {
                        "© ONS": "https://www.ons.gov.uk"
                    },
                    "format": "mvt",
                    "dbs": "XYZ",
                    "tables": {
                        "11": null,
                        "12": "dev.oa",
                        "13": "dev.oa"
                    },
                    "mvt_cache": "dev.oa__mvts",
                    "mvt_fields": [
                        "pop_11"
                    ],
                    "style": {
                        "themes": {
                            "Population '11": {
                                "type": "graduated",
                                "field": "pop_11",
                                "cat": {
                                    "0": {
                                        "label": "0 to 10000",
                                        "fillColor": "#15773f"
                                    },
                                    "100": {
                                        "label": "10000 to 25000",
                                        "fillColor": "#66bd63"
                                    },
                                    "200": {
                                        "label": "25000 to 50000",
                                        "fillColor": "#a6d96a"
                                    },
                                    "300": {
                                        "label": "50000 to 100000",
                                        "fillColor": "#d9ef8b"
                                    },
                                    "400": {
                                        "label": "100000 to 250000",
                                        "fillColor": "#fdae61"
                                    },
                                    "500": {
                                        "label": "250000 to 500000",
                                        "fillColor": "#f46d43"
                                    },
                                    "600": {
                                        "label": "500000 or more",
                                        "fillColor": "#d73027"
                                    }
                                }
                            }
                        }
                    },
                    "qID": "id",
                    "infoj": [{
                            "type": "key"
                        },
                        {
                            "label": "OA Code",
                            "field": "oacode",
                            "type": "text",
                            "inline": true,
                            "filter": "like"
                        },
                        {
                            "label": "Population '11",
                            "field": "pop_11",
                            "type": "integer",
                            "filter": "numeric",
                            "edit": true
                        }
                    ]
                },
                "retail_places": {
                    "name": "Retail Places",
                    "format": "mvt",
                    "dbs": "XYZ",
                    "tables": {
                        "8": null,
                        "9": "dev.retailplaces"
                    },
                    "report": {
                        "templates": {
                            "Report 1": {
                                "template": "default"
                            },
                            "Report 2": {
                                "template": "default"
                            }
                        }
                    },
                    "tableview": {
                        "tables": {
                            "Retail Places": {
                                "from": "dev.retailplaces",
                                "columns": [{
                                        "title": "ID",
                                        "field": "id",
                                        "type": "text"
                                    },
                                    {
                                        "field": "dev_date",
                                        "type": "date"
                                    },
                                    {
                                        "field": "rp_type",
                                        "type": "text"
                                    }
                                ]
                            }
                        }
                    },
                    "mvt_cache": "dev.retailplaces__mvts",
                    "mvt_fields": [
                        "rp_type",
                        "pop__11"
                    ],
                    "style": {
                        "themes": {
                            "Retail Place type": {
                                "type": "categorized",
                                "field": "rp_type",
                                "other": true,
                                "cat": {
                                    "Major City Centre": {
                                        "label": "Major City Centre",
                                        "color": "#EF271B",
                                        "fillColor": "#EF271B"
                                    },
                                    "City Centre": {
                                        "label": "City Centre",
                                        "color": "#BA2D0B",
                                        "fillColor": "#BA2D0B"
                                    },
                                    "Large Town Centre": {
                                        "label": "Large Town Centre",
                                        "color": "#FE4E00",
                                        "fillColor": "#FE4E00"
                                    },
                                    "Major Urban Centre": {
                                        "label": "Major Urban Centre",
                                        "color": "#E2711D",
                                        "fillColor": "#E2711D"
                                    },
                                    "Town Centre": {
                                        "label": "Town Centre",
                                        "color": "#F3A712",
                                        "fillColor": "#F3A712"
                                    },
                                    "Urban Centre": {
                                        "label": "Urban Centre",
                                        "color": "#FADF63",
                                        "fillColor": "#FADF63"
                                    },
                                    "Small Town Centre": {
                                        "label": "Small Town Centre",
                                        "color": "#FFE74C",
                                        "fillColor": "#FFE74C"
                                    },
                                    "Village Centre": {
                                        "label": "Village Centre",
                                        "color": "#DBFE87",
                                        "fillColor": "#DBFE87"
                                    },
                                    "Regional SC": {
                                        "label": "Regional SC",
                                        "color": "#8ED081",
                                        "fillColor": "#8ED081"
                                    },
                                    "Outlet Centre": {
                                        "label": "Outlet Centre",
                                        "color": "#7DDF64",
                                        "fillColor": "#7DDF64"
                                    },
                                    "Shopping Park": {
                                        "label": "Shopping Park",
                                        "color": "#074F57",
                                        "fillColor": "#074F57"
                                    },
                                    "Retail Park": {
                                        "label": "Retail Park",
                                        "color": "#32746D",
                                        "fillColor": "#32746D"
                                    },
                                    "Leisure Park": {
                                        "label": "Leisure Park",
                                        "color": "#41D3BD",
                                        "fillColor": "#41D3BD"
                                    },
                                    "Local Hub": {
                                        "label": "Local Hub",
                                        "color": "#08B2E3",
                                        "fillColor": "#08B2E3"
                                    },
                                    "Large Parade": {
                                        "label": "Large Parade",
                                        "color": "#1F487E",
                                        "fillColor": "#1F487E"
                                    },
                                    "Parade": {
                                        "label": "Parade",
                                        "color": "#541388",
                                        "fillColor": "#541388"
                                    },
                                    "Weak Parade": {
                                        "label": "Weak Parade",
                                        "color": "#D90368",
                                        "fillColor": "#D90368"
                                    }
                                }
                            },
                            "Population '11": {
                                "type": "graduated",
                                "field": "pop__11",
                                "cat": {
                                    "0": {
                                        "label": "0 to 10000",
                                        "fillColor": "#15773f"
                                    },
                                    "10000": {
                                        "label": "10000 to 25000",
                                        "fillColor": "#66bd63"
                                    },
                                    "25000": {
                                        "label": "25000 to 50000",
                                        "fillColor": "#a6d96a"
                                    },
                                    "50000": {
                                        "label": "50000 to 100000",
                                        "fillColor": "#d9ef8b"
                                    },
                                    "100000": {
                                        "label": "100000 to 250000",
                                        "fillColor": "#fdae61"
                                    },
                                    "250000": {
                                        "label": "250000 to 500000",
                                        "fillColor": "#f46d43"
                                    },
                                    "500000": {
                                        "label": "500000 or more",
                                        "fillColor": "#d73027"
                                    }
                                }
                            }
                        }
                    },
                    "qID": "tid",
                    "filter": {
                        "infoj": [{
                            "label": "ID count",
                            "field": "id_count",
                            "type": "integer",
                            "inline": true,
                            "fieldfx": "count(id)"
                        }]
                    },
                    "infoj": [{
                            "type": "key"
                        },
                        {
                            "label": "ID",
                            "field": "id",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "label": "Date edit",
                            "field": "dev_date",
                            "type": "date",
                            "edit": "true",
                            "filter": "date"
                        },
                        {
                            "label": "Date",
                            "field": "dev_date_",
                            "fieldfx": "dev_date",
                            "type": "date"
                        },
                        {
                            "label": "RP Type",
                            "field": "rp_type",
                            "type": "text",
                            "filter": {
                                "in": [
                                    "Major City Centre",
                                    "Large Town Centre",
                                    "Village Centre",
                                    "Weak Parade"
                                ]
                            }
                        },
                        {
                            "label": "Name",
                            "field": "uniq_name",
                            "type": "text"
                        },
                        {
                            "label": "Competition Str.",
                            "field": "comp_strgh",
                            "type": "integer",
                            "prefix": "£ "
                        },
                        {
                            "label": "OA pop_11",
                            "field": "pop__11",
                            "type": "integer",
                            "lookup": {
                                "table": "dev_oa",
                                "geom": "geom",
                                "condition": "ST_INTERSECTS",
                                "function": "AVG"
                            }
                        },
                        {
                            "label": "Population",
                            "type": "group",
                            "chart": {
                                "x": "label x",
                                "y": "label y",
                                "active": true
                            },
                            "expanded": true
                        },
                        {
                            "group": "Population",
                            "label": "Population '11",
                            "field": "pop__11",
                            "type": "integer"
                        },
                        {
                            "group": "Population",
                            "label": "Population '12",
                            "field": "pop__12",
                            "type": "integer"
                        },
                        {
                            "group": "Population",
                            "label": "Population '13",
                            "field": "pop__13",
                            "type": "integer"
                        },
                        {
                            "group": "Population",
                            "label": "Population '14",
                            "field": "pop__14",
                            "type": "integer"
                        },
                        {
                            "group": "Population",
                            "label": "Population '15",
                            "field": "pop__15",
                            "type": "integer"
                        },
                        {
                            "group": "Population",
                            "label": "Population '16",
                            "field": "pop__16",
                            "type": "integer"
                        },
                        {
                            "label": "Population 16 - 11",
                            "field": "pop_diff",
                            "fieldfx": "(pop__16 - pop__11)",
                            "type": "integer"
                        }
                    ]
                },
                "retail_points": {
                    "display": true,
                    "name": "Retail Points",
                    "format": "cluster",
                    "cluster_label": "store",
                    "dbs": "XYZ",
                    "qID": "id",
                    "table": "dev.retailpoints",
                    "hover": {
                        "field": "store"
                    },
                    "tableview": {
                        "tables": {
                            "Retail Points": {
                                "display": true,
                                "from": "dev.retailpoints",
                                "columns": [{
                                        "title": "ID",
                                        "field": "retailpoint_id",
                                        "type": "text"
                                    },
                                    {
                                        "title": "Retailer",
                                        "field": "retailer",
                                        "type": "text"
                                    },
                                    {
                                        "title": "Fascia",
                                        "field": "fascia",
                                        "type": "text"
                                    }
                                ]
                            }
                        }
                    },
                    "filter": {
                        "infoj": [{
                            "label": "ID count",
                            "field": "id_count",
                            "type": "integer",
                            "inline": true,
                            "fieldfx": "count(retailpoint_id)"
                        }]
                    },
                    "style": {
                        "themes": {
                            "Retailer": {
                                "type": "categorized",
                                "field": "retailer",
                                "other": true,
                                "cat": {
                                    "Tesco": {
                                        "label": "Tesco",
                                        "fillColor": "#0055a8",
                                        "layers": {
                                            "0.75": "#ffffff",
                                            "0.35": "#f02f26"
                                        }
                                    },
                                    "Sainsburys": {
                                        "label": "Sainsbury's",
                                        "fillColor": "#ee8a00",
                                        "layers": {
                                            "0.5": "#ffffff",
                                            "0.35": "#ee8a00"
                                        }
                                    },
                                    "Marks and Spencer": {
                                        "label": "Marks & Spencer",
                                        "fillColor": "#0a0d10",
                                        "layers": {
                                            "0.5": "#def036",
                                            "0.25": "#0a0d10"
                                        }
                                    }
                                }
                            },
                            "Households": {
                                "type": "graduated",
                                "field": "hhdooc_11",
                                "cat": {
                                    "0": {
                                        "label": "0 to 100",
                                        "fillColor": "#15773f"
                                    },
                                    "100": {
                                        "label": "100 to 200",
                                        "fillColor": "#66bd63"
                                    },
                                    "200": {
                                        "label": "200 to 400",
                                        "fillColor": "#a6d96a"
                                    },
                                    "400": {
                                        "label": "400 to 600",
                                        "fillColor": "#d9ef8b"
                                    },
                                    "600": {
                                        "label": "600 to 800",
                                        "fillColor": "#fdae61"
                                    },
                                    "800": {
                                        "label": "800 to 1000",
                                        "fillColor": "#f46d43"
                                    },
                                    "1000": {
                                        "label": "1000 or more",
                                        "fillColor": "#d73027"
                                    }
                                }
                            },
                            "Households Sized": {
                                "type": "graduated",
                                "field": "hhdooc_11",
                                "size": "hhdooc_11",
                                "cat": {
                                    "0": {
                                        "label": "0 to 100",
                                        "fillColor": "#15773f"
                                    },
                                    "100": {
                                        "label": "100 to 200",
                                        "fillColor": "#66bd63"
                                    },
                                    "200": {
                                        "label": "200 to 400",
                                        "fillColor": "#a6d96a"
                                    },
                                    "400": {
                                        "label": "400 to 600",
                                        "fillColor": "#d9ef8b"
                                    },
                                    "600": {
                                        "label": "600 to 800",
                                        "fillColor": "#fdae61"
                                    },
                                    "800": {
                                        "label": "800 to 1000",
                                        "fillColor": "#f46d43"
                                    },
                                    "1000": {
                                        "label": "1000 or more",
                                        "fillColor": "#d73027"
                                    }
                                }
                            },
                            "Tesco/Sainsbury's": {
                                "type": "competition",
                                "field": "retailer",
                                "other": true,
                                "cat": {
                                    "Tesco": {
                                        "label": "Tesco",
                                        "fillColor": "#0055a8"
                                    },
                                    "Sainsburys": {
                                        "label": "Sainsbury's",
                                        "fillColor": "#ee8a00"
                                    }
                                }
                            }
                        }
                    },
                    "infoj": [{
                            "type": "streetview"
                        },
                        {
                            "type": "key"
                        },
                        {
                            "label": "ID",
                            "field": "retailpoint_id",
                            "type": "text",
                            "inline": true
                        },
                        {
                            "label": "Store",
                            "field": "store",
                            "type": "text"
                        },
                        {
                            "label": "Retailer",
                            "field": "retailer",
                            "type": "text"
                        },
                        {
                            "label": "Fascia",
                            "field": "fascia",
                            "type": "text"
                        },
                        {
                            "label": "Address"
                        },
                        {
                            "field": "address_1",
                            "type": "text",
                            "level": 1
                        },
                        {
                            "field": "address_2",
                            "type": "text",
                            "level": 1
                        },
                        {
                            "field": "locality",
                            "type": "text",
                            "level": 1
                        },
                        {
                            "field": "town",
                            "type": "text",
                            "level": 1
                        },
                        {
                            "label": "Postcode",
                            "field": "postcode",
                            "type": "text",
                            "level": 1,
                            "filter": "like"
                        },
                        {
                            "label": "Households",
                            "field": "hhdooc_11",
                            "type": "integer"
                        },
                        {
                            "field": "test_flag",
                            "label": "Test boolean field",
                            "type": "boolean",
                            "filter": "boolean",
                            "edit": true
                        },
                        {
                            "label": "Catchment 10min",
                            "type": "label"
                        },
                        {
                            "field": "catchment_10min",
                            "fieldfx": "ST_asGeoJson(catchment_10min)",
                            "type": "geometry",
                            "edit": {
                                "isoline_here": {
                                    "minutes": 10
                                }
                            },
                            "style": {
                                "stroke": true,
                                "color": "#ffca28",
                                "fillColor": "#ffca28",
                                "weight": 2,
                                "fill": true,
                                "fillOpacity": 0.2
                            }
                        }
                    ]
                },
                "sites": {
                    "edit": {
                        "properties": true,
                        "point": true,
                        "delete": true
                    },
                    "name": "Sites",
                    "format": "cluster",
                    "geom": "geom_4326",
                    "dbs": "XYZ",
                    "qID": "id",
                    "table": "mapp.sites",
                    "cluster_label": "pub_name",
                    "infoj": [{
                            "type": "report",
                            "report": {
                                "template": "shneame",
                                "resource": "github",
                                "name": "Test site report",
                                "github": {
                                    "repo": "xyz_resources",
                                    "owner": "geolytix",
                                    "dir": "report_templates"
                                }
                            }
                        },
                        {
                            "type": "key"
                        },
                        {
                            "field": "pub_name",
                            "label": "Site Name",
                            "edit": true,
                            "inline": true
                        },
                        {
                            "label": "Drivetimes",
                            "type": "label"
                        },
                        {
                            "name": "HERE Catchment 5min",
                            "field": "isoline_5min",
                            "fieldfx": "ST_asGeoJson(isoline_5min)",
                            "type": "geometry",
                            "edit": {
                                "isoline_here": {
                                    "minutes": 5
                                }
                            },
                            "style": {
                                "stroke": true,
                                "color": "#BB0A21",
                                "weight": 2,
                                "fill": true,
                                "fillOpacity": 0.2
                            }
                        },
                        {
                            "label": "Population Growth % (2011-17)",
                            "field": "pop_growth_11_17_5min",
                            "fieldfx": "SUM(b.pop__17 - b.pop__11) * 100 / SUM(b.pop__11)",
                            "level": 1,
                            "type": "numeric",
                            "lookup": {
                                "table_a": "mapp.sites",
                                "table_b": "gb_hx_1k",
                                "geom_a": "isoline_5min",
                                "geom_b": "geomcntr"
                            }
                        },
                        {
                            "label": "Competitors 5min",
                            "field": "comp_5min",
                            "fieldfx": "COUNT(b.glxid)",
                            "level": 1,
                            "type": "integer",
                            "lookup": {
                                "table_a": "mapp.sites",
                                "table_b": "shepherd_neame.food_beverage",
                                "geom_a": "isoline_5min",
                                "geom_b": "geom"
                            }
                        },
                        {
                            "label": "field_withSelect",
                            "field": "field_withSelect",
                            "fieldfx": "comp_5min * pop_growth_11_17_5min",
                            "level": 1,
                            "type": "numeric",
                            "withSelect": true
                        },
                        {
                            "label": "Available tableviews",
                            "type": "label",
                            "hideInReport": true
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Population Summary",
                            "target_id": "xyz_table1",
                            "columns": [{
                                    "type": "integer",
                                    "title": "0-5 mins",
                                    "field": "min5",
                                    "lookup": {
                                        "table_a": "mapp.sites",
                                        "table_b": "gb_hx_1k",
                                        "geom_a": "isoline_5min",
                                        "geom_b": "geomcntr"
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "0-10 mins",
                                    "field": "min10",
                                    "lookup": {
                                        "table_a": "mapp.sites",
                                        "table_b": "gb_hx_1k",
                                        "geom_a": "isoline_10min",
                                        "geom_b": "geomcntr"
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "0-15 mins",
                                    "field": "min15",
                                    "lookup": {
                                        "table_a": "mapp.sites",
                                        "table_b": "gb_hx_1k",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geomcntr"
                                    }
                                }
                            ],
                            "rows": [{
                                    "field": "pop__17",
                                    "fieldfx": "SUM(b.pop__17)",
                                    "title": "Current Population"
                                },
                                {
                                    "field": "pop__11",
                                    "fieldfx": "SUM(b.pop__11)",
                                    "title": "Population 2011"
                                },
                                {
                                    "field": "pop_growth",
                                    "fieldfx": "SUM(b.pop__17 - b.pop__11) * 100 / SUM(b.pop__11)",
                                    "title": "Population Growth"
                                },
                                {
                                    "field": "students",
                                    "fieldfx": "SUM(eac_student__11) + SUM(ein_student__11)",
                                    "title": "Students"
                                },
                                {
                                    "field": "non_white",
                                    "fieldfx": "100*(SUM(pop__11) - SUM(ret_white_tot__11))/SUM(pop__11)",
                                    "title": "% Non-White"
                                },
                                {
                                    "field": "own_home",
                                    "fieldfx": "100*SUM(own)/SUM(own+rent+social)",
                                    "title": "Own Home"
                                },
                                {
                                    "field": "private_rented",
                                    "fieldfx": "100*SUM(rent)/SUM(own+rent+social)",
                                    "title": "Private Rented"
                                },
                                {
                                    "field": "social_rented",
                                    "fieldfx": "100*SUM(social)/SUM(own+rent+social)",
                                    "title": "Social Rented"
                                },
                                {
                                    "field": "single_hhds",
                                    "fieldfx": "100*SUM(pers1hhd)/SUM(pers1hhd+pers2hhd+pers2plushhd)",
                                    "title": "Single Hhds"
                                },
                                {
                                    "field": "hhds_two_ppl",
                                    "fieldfx": "100*SUM(pers2hhd)/SUM(pers1hhd+pers2hhd+pers2plushhd)",
                                    "title": "2 Person Hhds"
                                },
                                {
                                    "field": "hhds_3plus",
                                    "fieldfx": "100*SUM(pers2plushhd)/SUM(pers1hhd+pers2hhd+pers2plushhd)",
                                    "title": "3+ Hhds"
                                }
                            ]
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Worker Summary",
                            "display": true,
                            "target_id": "xyz_table8",
                            "columns": [{
                                "type": "integer",
                                "title": "Total Workers",
                                "field": "workers",
                                "lookup": {
                                    "table_a": "mapp.sites",
                                    "table_b": "gb_hx_1k",
                                    "geom_a": "isoline_15min",
                                    "geom_b": "geomcntr"
                                }
                            }],
                            "rows": [{
                                    "field": "workers_250",
                                    "fieldfx": "SUM(case when ST_distance(ST_Transform(a.geom_4326,27700),ST_transform(b.geomcntr,27700))<=250 then b.workers else 0 end)",
                                    "title": "Workers 250m"
                                },
                                {
                                    "field": "workers_500",
                                    "fieldfx": "SUM(case when ST_distance(ST_Transform(a.geom_4326,27700),ST_transform(b.geomcntr,27700))<=500 then b.workers else 0 end)",
                                    "title": "Workers 500m"
                                }
                            ]
                        },
                        {
                            "type": "tableDefinition",
                            "title": "OAC Profile",
                            "target_id": "xyz_table3",
                            "display": true,
                            "columns": [{
                                    "type": "integer",
                                    "title": "0-5 mins",
                                    "field": "min5",
                                    "lookup": {
                                        "table_a": "mapp.sites",
                                        "table_b": "gb_hx_1k",
                                        "geom_a": "isoline_5min",
                                        "geom_b": "geomcntr"
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "0-10 mins",
                                    "field": "min10",
                                    "lookup": {
                                        "table_a": "mapp.sites",
                                        "table_b": "gb_hx_1k",
                                        "geom_a": "isoline_10min",
                                        "geom_b": "geomcntr"
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "title": "0-15 mins",
                                    "field": "min15",
                                    "lookup": {
                                        "table_a": "mapp.sites",
                                        "table_b": "gb_hx_1k",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geomcntr"
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "field": "se_lon",
                                    "aspatial": "oac_1a_se_lon, oac_1b_se_lon, oac_1c_se_lon, oac_2a_se_lon,oac_2b_se_lon, oac_2c_se_lon, oac_2d_se_lon, oac_3a_se_lon, oac_3b_se_lon, oac_3c_se_lon, oac_3d_se_lon, oac_4a_se_lon, oac_4b_se_lon, oac_4c_se_lon, oac_5a_se_lon, oac_5b_se_lon, oac_6a_se_lon, oac_6b_se_lon, oac_7a_se_lon, oac_7b_se_lon, oac_7c_se_lon, oac_7d_se_lon, oac_8a_se_lon, oac_8b_se_lon, oac_8c_se_lon, oac_8d_se_lon, oac_total_se_lon FROM shepherd_neame.report_summary"
                                }
                            ],
                            "rows": [{
                                    "field": "oac_1a",
                                    "fieldfx": "round(SUM(CASE WHEN oac_group=1 THEN pop__17 ELSE 0 END))",
                                    "title": "1a - Farming communities"
                                },
                                {
                                    "field": "oac_1b",
                                    "fieldfx": "round(sum(case when oac_group=2 then pop__17 else 0 end))",
                                    "title": "1b - Rural tenants"
                                },
                                {
                                    "field": "oac_1c",
                                    "fieldfx": "round(sum(case when oac_group=3 then pop__17 else 0 end))",
                                    "title": "1c - Ageing rural dwellers"
                                },
                                {
                                    "field": "oac_2a",
                                    "fieldfx": "round(sum(case when oac_group=4 then pop__17 else 0 end))",
                                    "title": "2a - Students around campus"
                                },
                                {
                                    "field": "oac_2b",
                                    "fieldfx": "round(sum(case when oac_group=5 then pop__17 else 0 end))",
                                    "title": "2b - Inner city students"
                                },
                                {
                                    "field": "oac_2c",
                                    "fieldfx": "round(sum(case when oac_group=6 then pop__17 else 0 end))",
                                    "title": "2c - Comforable cosmopolitans"
                                },
                                {
                                    "field": "oac_2d",
                                    "fieldfx": "round(sum(case when oac_group=7 then pop__17 else 0 end))",
                                    "title": "2d - Aspiring and affluent"
                                },
                                {
                                    "field": "oac_3a",
                                    "fieldfx": "round(sum(case when oac_group=8 then pop__17 else 0 end))",
                                    "title": "3a - Ethnic family life"
                                },
                                {
                                    "field": "oac_3b",
                                    "fieldfx": "round(sum(case when oac_group=9 then pop__17 else 0 end))",
                                    "title": "3b - Endeavouring ethnic mix"
                                },
                                {
                                    "field": "oac_3c",
                                    "fieldfx": "round(sum(case when oac_group=10 then pop__17 else 0 end))",
                                    "title": "3c - Ethnic dynamics"
                                },
                                {
                                    "field": "oac_3d",
                                    "fieldfx": "round(sum(case when oac_group=11 then pop__17 else 0 end))",
                                    "title": "3d - Aspirational techies"
                                },
                                {
                                    "field": "oac_4a",
                                    "fieldfx": "round(sum(case when oac_group=12 then pop__17 else 0 end))",
                                    "title": "4a - Rented family living"
                                },
                                {
                                    "field": "oac_4b",
                                    "fieldfx": "round(sum(case when oac_group=13 then pop__17 else 0 end))",
                                    "title": "4b - Challenged Asian terraces"
                                },
                                {
                                    "field": "oac_4c",
                                    "fieldfx": "round(sum(case when oac_group=14 then pop__17 else 0 end))",
                                    "title": "4c - Asian traits"
                                },
                                {
                                    "field": "oac_5a",
                                    "fieldfx": "round(sum(case when oac_group=15 then pop__17 else 0 end))",
                                    "title": "5a - Urban professionals and families"
                                },
                                {
                                    "field": "oac_5b",
                                    "fieldfx": "round(sum(case when oac_group=16 then pop__17 else 0 end))",
                                    "title": "5b - Ageing urban living"
                                },
                                {
                                    "field": "oac_6a",
                                    "fieldfx": "round(sum(case when oac_group=17 then pop__17 else 0 end))",
                                    "title": "6a - Suburban achievers"
                                },
                                {
                                    "field": "oac_6b",
                                    "fieldfx": "round(sum(case when oac_group=18 then pop__17 else 0 end))",
                                    "title": "6b - Semi-detached suburbia"
                                },
                                {
                                    "field": "oac_7a",
                                    "fieldfx": "round(sum(case when oac_group=19 then pop__17 else 0 end))",
                                    "title": "7a - Challenged diversity"
                                },
                                {
                                    "field": "oac_7b",
                                    "fieldfx": "round(sum(case when oac_group=20 then pop__17 else 0 end))",
                                    "title": "7b - Constrained flat dwellers"
                                },
                                {
                                    "field": "oac_7c",
                                    "fieldfx": "round(sum(case when oac_group=21 then pop__17 else 0 end))",
                                    "title": "7c - White communities"
                                },
                                {
                                    "field": "oac_7d",
                                    "fieldfx": "round(sum(case when oac_group=22 then pop__17 else 0 end))",
                                    "title": "7d - Ageing city dwellers"
                                },
                                {
                                    "field": "oac_8a",
                                    "fieldfx": "round(sum(case when oac_group=23 then pop__17 else 0 end))",
                                    "title": "8a - Industrious communities"
                                },
                                {
                                    "field": "oac_8b",
                                    "fieldfx": "round(sum(case when oac_group=24 then pop__17 else 0 end))",
                                    "title": "8b - Challenged terraced workers"
                                },
                                {
                                    "field": "oac_8c",
                                    "fieldfx": "round(sum(case when oac_group=25 then pop__17 else 0 end))",
                                    "title": "8c - Hard-pressed ageing workers"
                                },
                                {
                                    "field": "oac_8d",
                                    "fieldfx": "round(sum(case when oac_group=26 then pop__17 else 0 end))",
                                    "title": "8d - Migration and churn"
                                },
                                {
                                    "field": "oac_total",
                                    "fieldfx": "round(sum(case when oac_group>0 then pop__17 else 0 end))",
                                    "title": "Total"
                                }
                            ],
                            "agg": {
                                "share15": {
                                    "title": "% with 15 min",
                                    "type": "integer",
                                    "rows": [
                                        "100*min15.oac_1a/min15.oac_total",
                                        "100*min15.oac_1b/min15.oac_total",
                                        "100*min15.oac_1c/min15.oac_total",
                                        "100*min15.oac_2a/min15.oac_total",
                                        "100*min15.oac_2b/min15.oac_total",
                                        "100*min15.oac_2c/min15.oac_total",
                                        "100*min15.oac_2d/min15.oac_total",
                                        "100*min15.oac_3a/min15.oac_total",
                                        "100*min15.oac_3b/min15.oac_total",
                                        "100*min15.oac_3c/min15.oac_total",
                                        "100*min15.oac_3d/min15.oac_total",
                                        "100*min15.oac_4a/min15.oac_total",
                                        "100*min15.oac_4b/min15.oac_total",
                                        "100*min15.oac_4c/min15.oac_total",
                                        "100*min15.oac_5a/min15.oac_total",
                                        "100*min15.oac_5b/min15.oac_total",
                                        "100*min15.oac_6a/min15.oac_total",
                                        "100*min15.oac_6b/min15.oac_total",
                                        "100*min15.oac_7a/min15.oac_total",
                                        "100*min15.oac_7b/min15.oac_total",
                                        "100*min15.oac_7c/min15.oac_total",
                                        "100*min15.oac_7d/min15.oac_total",
                                        "100*min15.oac_8a/min15.oac_total",
                                        "100*min15.oac_8b/min15.oac_total",
                                        "100*min15.oac_8c/min15.oac_total",
                                        "100*min15.oac_8d/min15.oac_total"
                                    ]
                                },
                                "oac_se_lon_total": {
                                    "title": "SE and London %",
                                    "type": "integer",
                                    "rows": [
                                        "se_lon.oac_1a_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_1b_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_1c_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_2a_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_2b_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_2c_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_2d_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_3a_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_3b_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_3c_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_3d_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_4a_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_4b_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_4c_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_5a_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_5b_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_6a_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_6b_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_7a_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_7b_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_7c_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_7d_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_8a_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_8b_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_8c_se_lon*100/se_lon.oac_total_se_lon",
                                        "se_lon.oac_8d_se_lon*100/se_lon.oac_total_se_lon"
                                    ]
                                },
                                "oac_index": {
                                    "title": "OAC Profile Index",
                                    "type": "integer",
                                    "formatter": "progress",
                                    "formatterParams": {
                                        "color": [
                                            "#2196f3",
                                            "orange",
                                            "red"
                                        ],
                                        "max": 250
                                    },
                                    "width": 200,
                                    "sorter": "number",
                                    "rows": [
                                        "se_lon.oac_total_se_lon*(100*min15.oac_1a/min15.oac_total)/se_lon.oac_1a_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_1b/min15.oac_total)/se_lon.oac_1b_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_1c/min15.oac_total)/se_lon.oac_1c_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_2a/min15.oac_total)/se_lon.oac_2a_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_2b/min15.oac_total)/se_lon.oac_2b_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_2c/min15.oac_total)/se_lon.oac_2c_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_2d/min15.oac_total)/se_lon.oac_2d_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_3a/min15.oac_total)/se_lon.oac_3a_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_3b/min15.oac_total)/se_lon.oac_3b_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_3c/min15.oac_total)/se_lon.oac_3c_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_3d/min15.oac_total)/se_lon.oac_3d_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_4a/min15.oac_total)/se_lon.oac_4a_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_4b/min15.oac_total)/se_lon.oac_4b_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_4c/min15.oac_total)/se_lon.oac_4c_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_5a/min15.oac_total)/se_lon.oac_5a_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_5b/min15.oac_total)/se_lon.oac_5b_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_6a/min15.oac_total)/se_lon.oac_6a_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_6b/min15.oac_total)/se_lon.oac_6b_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_7a/min15.oac_total)/se_lon.oac_7a_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_7b/min15.oac_total)/se_lon.oac_7b_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_7c/min15.oac_total)/se_lon.oac_7c_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_7d/min15.oac_total)/se_lon.oac_7d_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_8a/min15.oac_total)/se_lon.oac_8a_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_8b/min15.oac_total)/se_lon.oac_8b_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_8c/min15.oac_total)/se_lon.oac_8c_se_lon",
                                        "se_lon.oac_total_se_lon*(100*min15.oac_8d/min15.oac_total)/se_lon.oac_8d_se_lon"
                                    ]
                                }
                            }
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Age Profile",
                            "display": true,
                            "target_id": "xyz_table2",
                            "chart": {
                                "type": "horizontalBar",
                                "active": true,
                                "field": "age_index"
                            },
                            "columns": [{
                                    "type": "integer",
                                    "title": "0-5 mins",
                                    "field": "min5",
                                    "lookup": {
                                        "table_a": "mapp.sites",
                                        "table_b": "gb_hx_1k",
                                        "geom_a": "isoline_5min",
                                        "geom_b": "geomcntr"
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "0-10 mins",
                                    "field": "min10",
                                    "lookup": {
                                        "table_a": "mapp.sites",
                                        "table_b": "gb_hx_1k",
                                        "geom_a": "isoline_10min",
                                        "geom_b": "geomcntr"
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "title": "0-15 mins",
                                    "field": "min15",
                                    "lookup": {
                                        "table_a": "mapp.sites",
                                        "table_b": "gb_hx_1k",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geomcntr"
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "field": "uk",
                                    "aspatial": "age_under_18_se_lon, age_18to24_se_lon, age_25to29_se_lon, age_30to44_se_lon, age_45to59_se_lon, age_60plus_se_lon, age_total_se_lon FROM shepherd_neame.report_summary"
                                }
                            ],
                            "rows": [{
                                    "field": "age_under_18",
                                    "title": "< 18",
                                    "fieldfx": "round(SUM(pop__11 - age_18to19__11 - age_20to24__11 - age_25to29__11 - age_30to44__11 - age_45to59__11 - age60plus))"
                                },
                                {
                                    "field": "age_18to24",
                                    "fieldfx": "round(SUM(age_18to19__11 + age_20to24__11))",
                                    "title": "18 to 24"
                                },
                                {
                                    "field": "age_25to29",
                                    "fieldfx": "round(SUM(age_25to29__11))",
                                    "title": "25 to 29"
                                },
                                {
                                    "field": "age_30to44",
                                    "fieldfx": "round(SUM(age_30to44__11))",
                                    "title": "30 to 44"
                                },
                                {
                                    "field": "age_45to59",
                                    "fieldfx": "round(SUM(age_45to59__11))",
                                    "title": "45 to 59"
                                },
                                {
                                    "field": "age_60plus",
                                    "fieldfx": "round(SUM(age60plus))",
                                    "title": "60+"
                                },
                                {
                                    "field": "age_profile_total",
                                    "fieldfx": "round(SUM(pop__11))",
                                    "title": "Total"
                                }
                            ],
                            "agg": {
                                "share15": {
                                    "title": "% with 15 min",
                                    "type": "integer",
                                    "rows": [
                                        "100*min15.age_under_18/min15.age_profile_total",
                                        "100*min15.age_18to24/min15.age_profile_total",
                                        "100*min15.age_25to29/min15.age_profile_total",
                                        "100*min15.age_30to44/min15.age_profile_total",
                                        "100*min15.age_45to59/min15.age_profile_total",
                                        "100*min15.age_60plus/min15.age_profile_total",
                                        "100*min15.age_profile_total/min15.age_profile_total"
                                    ]
                                },
                                "age_se_lon_total": {
                                    "title": "SE and London %",
                                    "type": "integer",
                                    "rows": [
                                        "uk.age_under_18_se_lon*100/uk.age_total_se_lon",
                                        "uk.age_18to24_se_lon*100/uk.age_total_se_lon",
                                        "uk.age_25to29_se_lon*100/uk.age_total_se_lon",
                                        "uk.age_30to44_se_lon*100/uk.age_total_se_lon",
                                        "uk.age_45to59_se_lon*100/uk.age_total_se_lon",
                                        "uk.age_60plus_se_lon*100/uk.age_total_se_lon",
                                        "uk.age_total_se_lon*100/uk.age_total_se_lon"
                                    ]
                                },
                                "age_index": {
                                    "title": "Age Profile Index",
                                    "type": "integer",
                                    "formatter": "progress",
                                    "formatterParams": {
                                        "color": [
                                            "#2196f3",
                                            "orange",
                                            "red"
                                        ],
                                        "max": 250
                                    },
                                    "width": 200,
                                    "sorter": "number",
                                    "rows": [
                                        "uk.age_total_se_lon*(100*min15.age_under_18/min15.age_profile_total)/uk.age_under_18_se_lon",
                                        "uk.age_total_se_lon*(100*min15.age_18to24/min15.age_profile_total)/uk.age_18to24_se_lon",
                                        "uk.age_total_se_lon*(100*min15.age_25to29/min15.age_profile_total)/uk.age_25to29_se_lon",
                                        "uk.age_total_se_lon*(100*min15.age_30to44/min15.age_profile_total)/uk.age_30to44_se_lon",
                                        "uk.age_total_se_lon*(100*min15.age_45to59/min15.age_profile_total)/uk.age_45to59_se_lon",
                                        "uk.age_total_se_lon*(100*min15.age_60plus/min15.age_profile_total)/uk.age_60plus_se_lon",
                                        "uk.age_total_se_lon*(100*min15.age_profile_total/min15.age_profile_total)/uk.age_total_se_lon"
                                    ]
                                }
                            }
                        },
                        {
                            "type": "tableDefinition",
                            "title": "Social Grade",
                            "display": true,
                            "target_id": "xyz_table4",
                            "chart": {
                                "type": "horizontalBar",
                                "active": true,
                                "field": "sg_index",
                                "backgroundColor": [
                                    "#8e24aa",
                                    "#1e88e5",
                                    "#00897b",
                                    "#ff8a65",
                                    "#a1887f",
                                    "#78909c"
                                ]
                            },
                            "columns": [{
                                    "type": "integer",
                                    "title": "0-5 mins",
                                    "field": "min5",
                                    "lookup": {
                                        "table_a": "mapp.sites",
                                        "table_b": "gb_hx_1k",
                                        "geom_a": "isoline_5min",
                                        "geom_b": "geomcntr"
                                    }
                                },
                                {
                                    "type": "integer",
                                    "title": "0-10 mins",
                                    "field": "min10",
                                    "lookup": {
                                        "table_a": "mapp.sites",
                                        "table_b": "gb_hx_1k",
                                        "geom_a": "isoline_10min",
                                        "geom_b": "geomcntr"
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "title": "0-15 mins",
                                    "field": "min15",
                                    "lookup": {
                                        "table_a": "mapp.sites",
                                        "table_b": "gb_hx_1k",
                                        "geom_a": "isoline_15min",
                                        "geom_b": "geomcntr"
                                    }
                                },
                                {
                                    "type": "numeric",
                                    "field": "uk",
                                    "aspatial": "social_grade_ab_se_lon, social_grade_c1_se_lon, social_grade_c2_se_lon, social_grade_de_se_lon, social_grade_total_se_lon FROM shepherd_neame.report_summary"
                                }
                            ],
                            "rows": [{
                                    "field": "sg_ab",
                                    "fieldfx": "round(SUM(ski_ab__11))",
                                    "title": "AB"
                                },
                                {
                                    "field": "sg_c1",
                                    "fieldfx": "round(SUM(ski_c1__11))",
                                    "title": "C1"
                                },
                                {
                                    "field": "sg_c2",
                                    "fieldfx": "round(SUM(ski_c2__11))",
                                    "title": "C2"
                                },
                                {
                                    "field": "sg_de",
                                    "fieldfx": "round(SUM(ski_de__11))",
                                    "title": "DE"
                                },
                                {
                                    "field": "sg_total",
                                    "fieldfx": "round(SUM(ski_hrp_base__11))",
                                    "title": "Total"
                                }
                            ],
                            "agg": {
                                "share15": {
                                    "title": "% with 15 min",
                                    "type": "integer",
                                    "rows": [
                                        "100*min15.sg_ab/min15.sg_total",
                                        "100*min15.sg_c1/min15.sg_total",
                                        "100*min15.sg_c2/min15.sg_total",
                                        "100*min15.sg_de/min15.sg_total",
                                        "100*min15.sg_total/min15.sg_total"
                                    ]
                                },
                                "sg_se_lon_total": {
                                    "title": "SE and London %",
                                    "type": "integer",
                                    "rows": [
                                        "uk.social_grade_ab_se_lon*100/uk.social_grade_total_se_lon",
                                        "uk.social_grade_c1_se_lon*100/uk.social_grade_total_se_lon",
                                        "uk.social_grade_c2_se_lon*100/uk.social_grade_total_se_lon",
                                        "uk.social_grade_de_se_lon*100/uk.social_grade_total_se_lon",
                                        "uk.social_grade_total_se_lon*100/uk.social_grade_total_se_lon"
                                    ]
                                },
                                "sg_index": {
                                    "title": "Social Grade Index",
                                    "type": "integer",
                                    "formatter": "progress",
                                    "formatterParams": {
                                        "color": [
                                            "#2196f3",
                                            "orange",
                                            "red"
                                        ],
                                        "max": 250
                                    },
                                    "width": 200,
                                    "sorter": "number",
                                    "rows": [
                                        "uk.social_grade_total_se_lon*(100*min15.sg_ab/min15.sg_total)/uk.social_grade_ab_se_lon",
                                        "uk.social_grade_total_se_lon*(100*min15.sg_c1/min15.sg_total)/uk.social_grade_c1_se_lon",
                                        "uk.social_grade_total_se_lon*(100*min15.sg_c2/min15.sg_total)/uk.social_grade_c2_se_lon",
                                        "uk.social_grade_total_se_lon*(100*min15.sg_de/min15.sg_total)/uk.social_grade_de_se_lon",
                                        "uk.social_grade_total_se_lon*(100*min15.sg_total/min15.sg_total)/uk.social_grade_total_se_lon"
                                    ]
                                }
                            }
                        },
                        {
                            "type": "orderedList",
                            "title": "Nearest competitors",
                            "display": true,
                            "table": "shepherd_neame.food_beverage",
                            "target_id": "xyz_table5",
                            "geom": "geom",
                            "columns": [{
                                    "title": "Competitor name",
                                    "field": "fascia"
                                },
                                {
                                    "title": "Category",
                                    "field": "rlcategory"
                                },
                                {
                                    "title": "Postcode",
                                    "field": "postcode"
                                },
                                {
                                    "title": "Retail place type",
                                    "field": "rp_type"
                                },
                                {
                                    "type": "integer",
                                    "geography": true,
                                    "title": "Distance (m)",
                                    "fx": "ST_DISTANCE",
                                    "field": "dist",
                                    "orderby": true
                                }
                            ],
                            "order": "ASC",
                            "limit": 8
                        },
                        {
                            "type": "streetview",
                            "hideInReport": true
                        }
                    ],
                    "style": {
                        "marker": {
                            "type": "target",
                            "fillColor": "#2364AA",
                            "layers": {
                                "0.75": "#EEE",
                                "0.50": "#2364AA"
                            }
                        },
                        "markerMulti": {
                            "type": "target",
                            "fillColor": "#2364AA",
                            "layers": {
                                "0.75": "#EEE",
                                "0.50": "#2364AA"
                            }
                        }
                    }
                },
                "grid": {
                    "name": "Grid",
                    "attribution": {
                        "© ONS": "https://www.ons.gov.uk"
                    },
                    "format": "grid",
                    "dbs": "XYZ",
                    "geom": "geomcntr",
                    "tables": {
                        "7": null,
                        "8": "gb_hx_16k",
                        "9": "gb_hx_8k",
                        "10": "gb_hx_4k",
                        "11": "gb_hx_2k",
                        "12": "gb_hx_1k",
                        "13": "gb_hx_1k",
                        "14": null
                    },
                    "grid_fields": {
                        "Population 2001": "pop__01",
                        "Population 2011": "pop__11",
                        "Female population": "gen_female__11",
                        "Male population": "gen_male__11"
                    }
                },
                "Mapbox Label": {
                    "group": "Base Layer",
                    "format": "tiles",
                    "attribution": {
                        "© Mapbox": "https://www.mapbox.com/about/maps",
                        "© OpenStreetMap": "http://www.openstreetmap.org/copyright"
                    },
                    "URI": "https://api.mapbox.com/styles/v1/dbauszus/cj9puo8pr5o0c2sovhdwhkc7z/tiles/256/{z}/{x}/{y}?&provider=MAPBOX"
                },
                "pubs":
                {
                    "display": true,
                    "name": "Test Pubs",
                    "format": "cluster",
                    "dbs": "XYZ",
                    "table": "mb.mb_pub_jan_2019",
                    "geom": "geom_4326",
                    "cluster_label": "brand",
                    "cluster_kmeans": 0.2,
                    "cluster_dbscan": 0.012,
                    "tableview":
                    {
                        "tables":
                        {
                            "mb_pubs":
                            {
                                "title": "Pubs",
                                "from": "mb.mb_pub_jan_2019",
                                "columns": [
                                {
                                    "field": "bun_code",
                                    "title": "Bun Code"
                                },
                                {
                                    "field": "name",
                                    "title": "Name"
                                },
                                {
                                    "field": "address",
                                    "title": "Address"
                                },
                                {
                                    "field": "post_code",
                                    "title": "Post Code"
                                },
                                {
                                    "field": "current_group_name",
                                    "title": "Current Group Name"
                                },
                                {
                                    "field": "current_area_name",
                                    "title": "Current Area Name"
                                },
                                {
                                    "field": "current_branch_name",
                                    "title": "Current Branch Name"
                                },
                                {
                                    "field": "location_type",
                                    "title": "Location Type"
                                }]
                            }
                        }
                    },
                    "edit":
                    {
                        "properties": true
                    },
                    "qID": "id",
                    "infoj": [
                    {
                        "field": "bun_code",
                        "label": "Bun Code"
                    },
                    {
                        "field": "name",
                        "label": "Name"
                    },
                    {
                        "field": "brand",
                        "label": "Brand"
                    },
                    {
                        "field": "address",
                        "label": "Address"
                    },
                    {
                        "field": "post_code",
                        "label": "Post Code"
                    },
                    {
                        "field": "comments",
                        "label": "Comments",
                        "type": "textarea",
                        "edit": true
                    },
                    {
                        "type": "group",
                        "label": "Premise Details"
                    },
                    {
                        "field": "current_group_name",
                        "group": "Premise Details",
                        "inline": true,
                        "label": "Current Group Name"
                    },
                    {
                        "field": "current_area_name",
                        "group": "Premise Details",
                        "inline": true,
                        "label": "Current Area Name"
                    },
                    {
                        "field": "current_branch_name",
                        "group": "Premise Details",
                        "inline": true,
                        "label": "Current Branch Name"
                    },
                    {
                        "field": "location_type",
                        "group": "Premise Details",
                        "inline": true,
                        "label": "Location Type"
                    },
                    {
                        "field": "rp_proximity",
                        "group": "Premise Details",
                        "inline": true,
                        "label": "RLP (General Park) Proximity"
                    },
                    {
                        "field": "rp_type",
                        "group": "Premise Details",
                        "inline": true,
                        "label": "RLP (General Park) Type"
                    },
                    {
                        "field": "seafront",
                        "group": "Premise Details",
                        "inline": true,
                        "label": "Seafront"
                    },
                    {
                        "field": "building_desc",
                        "group": "Premise Details",
                        "inline": true,
                        "label": "Building Description"
                    },
                    {
                        "field": "inkeepers_lodge",
                        "group": "Premise Details",
                        "inline": true,
                        "label": "Inkeepers Lodge"
                    },
                    {
                        "field": "ikl_number_of_rooms_oct_2018",
                        "group": "Premise Details",
                        "inline": true,
                        "label": "IKL Number of Rooms (Oct 2018)"
                    },
                    {
                        "field": "playbarn",
                        "group": "Premise Details",
                        "inline": true,
                        "label": "Playbarn Current Trading Flag"
                    },
                    {
                        "field": "car_park_spaces",
                        "group": "Premise Details",
                        "inline": true,
                        "label": "Car Park Spaces"
                    },
                    {
                        "field": "disabled_car_park_spaces",
                        "group": "Premise Details",
                        "inline": true,
                        "label": "Car Park Spaces (Disabled)"
                    },
                    {
                        "field": "external_eda",
                        "group": "Premise Details",
                        "inline": true,
                        "label": "External EDA"
                    },
                    {
                        "field": "external_number_of_covers",
                        "group": "Premise Details",
                        "inline": true,
                        "label": "External Number of Covers"
                    },
                    {
                        "field": "internal_eda",
                        "group": "Premise Details",
                        "inline": true,
                        "label": "Internal EDA"
                    },
                    {
                        "field": "kitchen_position",
                        "group": "Premise Details",
                        "inline": true,
                        "label": "Kitchen Positiion"
                    },
                    {
                        "field": "baby_changing",
                        "group": "Premise Details",
                        "inline": true,
                        "label": "Baby Changing"
                    },
                    {
                        "label": "Financial Details",
                        "type": "group"
                    },
                    {
                        "label": "Drivetimes",
                        "type": "label"
                    },
                    {
                        "name": "HERE Catchment 5min",
                        "field": "isoline_5min",
                        "fieldfx": "ST_asGeoJson(isoline_5min)",
                        "type": "geometry",
                        "edit":
                        {
                            "isoline_here":
                            {
                                "minutes": 5
                            }
                        },
                        "style":
                        {
                            "stroke": true,
                            "color": "#BB0A21",
                            "fillColor": "#BB0A21",
                            "weight": 2,
                            "fill": true,
                            "fillOpacity": 0.2
                        }
                    },
                    {
                        "label": "Population within 5min",
                        "type": "group",
                        "chart":
                        {
                            "active": true,
                            "type": "bar",
                            "unit": "k",
                            "backgroundColor": [
                                "#E6A5AE",
                                "#E08F9A",
                                "#D97985",
                                "#D36371",
                                "#CD4C5D",
                                "#C73649",
                                "#C12035",
                                "#BB0A21"
                            ],
                            "borderColor": [
                                "#E6A5AE",
                                "#E08F9A",
                                "#D97985",
                                "#D36371",
                                "#CD4C5D",
                                "#C73649",
                                "#C12035",
                                "#BB0A21"
                            ]
                        }
                    },
                    {
                        "group": "Population within 5min",
                        "label": "2011",
                        "field": "_pop__11_5min",
                        "fieldfx": "SUM(b.pop__11)",
                        "level": 1,
                        "type": "integer",
                        "lookup":
                        {
                            "table_a": "mb.mb_pub_jan_2019",
                            "table_b": "geodata.uk_glx_geodata_hex_1k",
                            "geom_a": "isoline_5min",
                            "geom_b": "geom_p_4326"
                        }
                    },
                    {
                        "group": "Population within 5min",
                        "label": "2012",
                        "field": "_pop__12_5min",
                        "fieldfx": "SUM(b.pop__12)",
                        "level": 1,
                        "type": "integer",
                        "lookup":
                        {
                            "table_a": "mb.mb_pub_jan_2019",
                            "table_b": "geodata.uk_glx_geodata_hex_1k",
                            "geom_a": "isoline_5min",
                            "geom_b": "geom_p_4326"
                        }
                    },
                    {
                        "group": "Population within 5min",
                        "label": "2013",
                        "field": "_pop__13_5min",
                        "fieldfx": "SUM(b.pop__13)",
                        "level": 1,
                        "type": "integer",
                        "lookup":
                        {
                            "table_a": "mb.mb_pub_jan_2019",
                            "table_b": "geodata.uk_glx_geodata_hex_1k",
                            "geom_a": "isoline_5min",
                            "geom_b": "geom_p_4326"
                        }
                    },
                    {
                        "group": "Population within 5min",
                        "label": "2014",
                        "field": "_pop__14_5min",
                        "fieldfx": "SUM(b.pop__14)",
                        "level": 1,
                        "type": "integer",
                        "lookup":
                        {
                            "table_a": "mb.mb_pub_jan_2019",
                            "table_b": "geodata.uk_glx_geodata_hex_1k",
                            "geom_a": "isoline_5min",
                            "geom_b": "geom_p_4326"
                        }
                    },
                    {
                        "group": "Population within 5min",
                        "label": "2015",
                        "field": "_pop__15_5min",
                        "fieldfx": "SUM(b.pop__15)",
                        "level": 1,
                        "type": "integer",
                        "lookup":
                        {
                            "table_a": "mb.mb_pub_jan_2019",
                            "table_b": "geodata.uk_glx_geodata_hex_1k",
                            "geom_a": "isoline_5min",
                            "geom_b": "geom_p_4326"
                        }
                    },
                    {
                        "group": "Population within 5min",
                        "label": "2016",
                        "field": "_pop__16_5min",
                        "fieldfx": "SUM(b.pop__16)",
                        "level": 1,
                        "type": "integer",
                        "lookup":
                        {
                            "table_a": "mb.mb_pub_jan_2019",
                            "table_b": "geodata.uk_glx_geodata_hex_1k",
                            "geom_a": "isoline_5min",
                            "geom_b": "geom_p_4326"
                        }
                    },
                    {
                        "group": "Population within 5min",
                        "label": "2017",
                        "field": "_pop__17_5min",
                        "fieldfx": "SUM(b.pop__17)",
                        "level": 1,
                        "type": "integer",
                        "lookup":
                        {
                            "table_a": "mb.mb_pub_jan_2019",
                            "table_b": "geodata.uk_glx_geodata_hex_1k",
                            "geom_a": "isoline_5min",
                            "geom_b": "geom_p_4326"
                        }
                    },
                    {
                        "name": "HERE Catchment 10min",
                        "field": "isoline_10min",
                        "fieldfx": "ST_asGeoJson(isoline_10min)",
                        "type": "geometry",
                        "edit":
                        {
                            "isoline_here":
                            {
                                "minutes": 10
                            }
                        },
                        "style":
                        {
                            "stroke": true,
                            "color": "#F49D37",
                            "fillColor": "#F49D37",
                            "weight": 2,
                            "fill": true
                        }
                    },
                    {
                        "label": "Population within 10min",
                        "type": "group",
                        "chart":
                        {
                            "active": true,
                            "type": "bar",
                            "unit": "k",
                            "backgroundColor": [
                                "#FBDBB6",
                                "#FAD2A4",
                                "#F9C991",
                                "#F8C07F",
                                "#F7B76D",
                                "#F6AE5B",
                                "#F5A549",
                                "#F49D37"
                            ],
                            "borderColor": [
                                "#FBDBB6",
                                "#FAD2A4",
                                "#F9C991",
                                "#F8C07F",
                                "#F7B76D",
                                "#F6AE5B",
                                "#F5A549",
                                "#F49D37"
                            ]
                        }
                    },
                    {
                        "group": "Population within 10min",
                        "label": "2011",
                        "field": "_pop__11_10min",
                        "fieldfx": "SUM(b.pop__11)",
                        "level": 1,
                        "type": "integer",
                        "lookup":
                        {
                            "table_a": "mb.mb_pub_jan_2019",
                            "table_b": "geodata.uk_glx_geodata_hex_1k",
                            "geom_a": "isoline_10min",
                            "geom_b": "geom_p_4326"
                        }
                    },
                    {
                        "group": "Population within 10min",
                        "label": "2012",
                        "field": "_pop__12_10min",
                        "fieldfx": "SUM(b.pop__12)",
                        "level": 1,
                        "type": "integer",
                        "lookup":
                        {
                            "table_a": "mb.mb_pub_jan_2019",
                            "table_b": "geodata.uk_glx_geodata_hex_1k",
                            "geom_a": "isoline_10min",
                            "geom_b": "geom_p_4326"
                        }
                    },
                    {
                        "group": "Population within 10min",
                        "label": "2013",
                        "field": "_pop__13_10min",
                        "fieldfx": "SUM(b.pop__13)",
                        "level": 1,
                        "type": "integer",
                        "lookup":
                        {
                            "table_a": "mb.mb_pub_jan_2019",
                            "table_b": "geodata.uk_glx_geodata_hex_1k",
                            "geom_a": "isoline_10min",
                            "geom_b": "geom_p_4326"
                        }
                    },
                    {
                        "group": "Population within 10min",
                        "label": "2014",
                        "field": "_pop__14_10min",
                        "fieldfx": "SUM(b.pop__14)",
                        "level": 1,
                        "type": "integer",
                        "lookup":
                        {
                            "table_a": "mb.mb_pub_jan_2019",
                            "table_b": "geodata.uk_glx_geodata_hex_1k",
                            "geom_a": "isoline_10min",
                            "geom_b": "geom_p_4326"
                        }
                    },
                    {
                        "group": "Population within 10min",
                        "label": "2015",
                        "field": "_pop__15_10min",
                        "fieldfx": "SUM(b.pop__15)",
                        "level": 1,
                        "type": "integer",
                        "lookup":
                        {
                            "table_a": "mb.mb_pub_jan_2019",
                            "table_b": "geodata.uk_glx_geodata_hex_1k",
                            "geom_a": "isoline_10min",
                            "geom_b": "geom_p_4326"
                        }
                    },
                    {
                        "group": "Population within 10min",
                        "label": "2016",
                        "field": "_pop__16_10min",
                        "fieldfx": "SUM(b.pop__16)",
                        "level": 1,
                        "type": "integer",
                        "lookup":
                        {
                            "table_a": "mb.mb_pub_jan_2019",
                            "table_b": "geodata.uk_glx_geodata_hex_1k",
                            "geom_a": "isoline_10min",
                            "geom_b": "geom_p_4326"
                        }
                    },
                    {
                        "group": "Population within 10min",
                        "label": "2017",
                        "field": "_pop__17_10min",
                        "fieldfx": "SUM(b.pop__17)",
                        "level": 1,
                        "type": "integer",
                        "lookup":
                        {
                            "table_a": "mb.mb_pub_jan_2019",
                            "table_b": "geodata.uk_glx_geodata_hex_1k",
                            "geom_a": "isoline_10min",
                            "geom_b": "geom_p_4326"
                        }
                    },
                    {
                        "name": "HERE Catchment 15min",
                        "field": "isoline_15min",
                        "fieldfx": "ST_asGeoJson(isoline_15min)",
                        "type": "geometry",
                        "edit":
                        {
                            "isoline_here":
                            {
                                "minutes": 15
                            }
                        },
                        "style":
                        {
                            "stroke": true,
                            "color": "#FFF05A",
                            "fillColor": "#FFF05A",
                            "weight": 2,
                            "fill": true,
                            "fillOpacity": 0.2
                        }
                    },
                    {
                        "label": "Population within 15min",
                        "type": "group",
                        "chart":
                        {
                            "active": true,
                            "type": "bar",
                            "unit": "k",
                            "backgroundColor": [
                                "#FFF9C3",
                                "#FFF8B4",
                                "#FFF6A5",
                                "#FFF596",
                                "#FFF487",
                                "#FFF278",
                                "#FFF169",
                                "#FFF05A"
                            ],
                            "borderColor": [
                                "#FFF9C3",
                                "#FFF8B4",
                                "#FFF6A5",
                                "#FFF596",
                                "#FFF487",
                                "#FFF278",
                                "#FFF169",
                                "#FFF05A"
                            ]
                        }
                    },
                    {
                        "group": "Population within 15min",
                        "label": "2011",
                        "field": "_pop__11_15min",
                        "fieldfx": "SUM(b.pop__11)",
                        "level": 1,
                        "type": "integer",
                        "lookup":
                        {
                            "table_a": "mb.mb_pub_jan_2019",
                            "table_b": "geodata.uk_glx_geodata_hex_1k",
                            "geom_a": "isoline_15min",
                            "geom_b": "geom_p_4326"
                        }
                    },
                    {
                        "group": "Population within 15min",
                        "label": "2012",
                        "field": "_pop__12_15min",
                        "fieldfx": "SUM(b.pop__12)",
                        "level": 1,
                        "type": "integer",
                        "lookup":
                        {
                            "table_a": "mb.mb_pub_jan_2019",
                            "table_b": "geodata.uk_glx_geodata_hex_1k",
                            "geom_a": "isoline_15min",
                            "geom_b": "geom_p_4326"
                        }
                    },
                    {
                        "group": "Population within 15min",
                        "label": "2013",
                        "field": "_pop__13_15min",
                        "fieldfx": "SUM(b.pop__13)",
                        "level": 1,
                        "type": "integer",
                        "lookup":
                        {
                            "table_a": "mb.mb_pub_jan_2019",
                            "table_b": "geodata.uk_glx_geodata_hex_1k",
                            "geom_a": "isoline_15min",
                            "geom_b": "geom_p_4326"
                        }
                    },
                    {
                        "group": "Population within 15min",
                        "label": "2014",
                        "field": "_pop__14_15min",
                        "fieldfx": "SUM(b.pop__14)",
                        "level": 1,
                        "type": "integer",
                        "lookup":
                        {
                            "table_a": "mb.mb_pub_jan_2019",
                            "table_b": "geodata.uk_glx_geodata_hex_1k",
                            "geom_a": "isoline_15min",
                            "geom_b": "geom_p_4326"
                        }
                    },
                    {
                        "group": "Population within 15min",
                        "label": "2015",
                        "field": "_pop__15_15min",
                        "fieldfx": "SUM(b.pop__15)",
                        "level": 1,
                        "type": "integer",
                        "lookup":
                        {
                            "table_a": "mb.mb_pub_jan_2019",
                            "table_b": "geodata.uk_glx_geodata_hex_1k",
                            "geom_a": "isoline_15min",
                            "geom_b": "geom_p_4326"
                        }
                    },
                    {
                        "group": "Population within 15min",
                        "label": "2016",
                        "field": "_pop__16_15min",
                        "fieldfx": "SUM(b.pop__16)",
                        "level": 1,
                        "type": "integer",
                        "lookup":
                        {
                            "table_a": "mb.mb_pub_jan_2019",
                            "table_b": "geodata.uk_glx_geodata_hex_1k",
                            "geom_a": "isoline_15min",
                            "geom_b": "geom_p_4326"
                        }
                    },
                    {
                        "group": "Population within 15min",
                        "label": "2017",
                        "field": "_pop__17_15min",
                        "fieldfx": "SUM(b.pop__17)",
                        "level": 1,
                        "type": "integer",
                        "lookup":
                        {
                            "table_a": "mb.mb_pub_jan_2019",
                            "table_b": "geodata.uk_glx_geodata_hex_1k",
                            "geom_a": "isoline_15min",
                            "geom_b": "geom_p_4326"
                        }
                    },
                    {
                        "label": "Propensity Bar Chart",
                        "type": "group",
                        "chart":
                        {
                            "type": "horizontalBar",
                            "active": true,
                            "height": 300,
                            "backgroundColor": [
                                "#ffb300",
                                "#d81b60",
                                "#8e24aa",
                                "#5e35b1",
                                "#3949ab",
                                "#1e88e5",
                                "#039be5",
                                "#00acc1",
                                "#00897b",
                                "#E02323",
                                "#E0AA23",
                                "#82E023",
                                "#23E051",
                                "#23E0D2",
                                "#2382E0",
                                "#B523E0"
                            ],
                            "borderColor": [
                                "#ffb300",
                                "#d81b60",
                                "#8e24aa",
                                "#5e35b1",
                                "#3949ab",
                                "#1e88e5",
                                "#039be5",
                                "#00acc1",
                                "#00897b",
                                "#E02323",
                                "#E0AA23",
                                "#82E023",
                                "#23E051",
                                "#23E0D2",
                                "#2382E0",
                                "#B523E0"
                            ]
                        }
                    },
                    {
                        "field": "all_bar_one",
                        "group": "Propensity Bar Chart",
                        "type": "text",
                        "level": 2,
                        "inline": true,
                        "label": "All Bar One"
                    },
                    {
                        "field": "browns",
                        "group": "Propensity Bar Chart",
                        "type": "text",
                        "level": 2,
                        "inline": true,
                        "label": "Browns"
                    },
                    {
                        "field": "castle",
                        "group": "Propensity Bar Chart",
                        "type": "text",
                        "level": 2,
                        "inline": true,
                        "label": "Castle"
                    },
                    {
                        "field": "ember",
                        "group": "Propensity Bar Chart",
                        "type": "text",
                        "level": 2,
                        "inline": true,
                        "label": "Ember"
                    },
                    {
                        "field": "harvester",
                        "group": "Propensity Bar Chart",
                        "type": "text",
                        "level": 2,
                        "inline": true,
                        "label": "Harvester"
                    },
                    {
                        "field": "milner_and_carter",
                        "type": "text",
                        "group": "Propensity Bar Chart",
                        "level": 2,
                        "inline": true,
                        "label": "Miller and Carter"
                    },
                    {
                        "field": "nicholsons",
                        "type": "text",
                        "group": "Propensity Bar Chart",
                        "level": 2,
                        "inline": true,
                        "label": "Nicholsons"
                    },
                    {
                        "field": "oak_tree_high_street",
                        "type": "text",
                        "group": "Propensity Bar Chart",
                        "level": 2,
                        "inline": true,
                        "label": "Oak Tree High Street"
                    },
                    {
                        "field": "oak_tree_suburban",
                        "type": "text",
                        "group": "Propensity Bar Chart",
                        "level": 2,
                        "inline": true,
                        "label": "Oak Tree Suburban"
                    },
                    {
                        "field": "oneils",
                        "type": "text",
                        "group": "Propensity Bar Chart",
                        "level": 2,
                        "inline": true,
                        "label": "O'Neills"
                    },
                    {
                        "field": "pcdg",
                        "type": "text",
                        "group": "Propensity Bar Chart",
                        "level": 2,
                        "inline": true,
                        "label": "PCDG"
                    },
                    {
                        "field": "sizzling_pubs",
                        "type": "text",
                        "group": "Propensity Bar Chart",
                        "level": 2,
                        "inline": true,
                        "label": "Sizzling Pubs"
                    },
                    {
                        "field": "stonehouse_pizza_and_cavery",
                        "type": "text",
                        "group": "Propensity Bar Chart",
                        "level": 2,
                        "inline": true,
                        "label": "Stonehouse"
                    },
                    {
                        "field": "toby_carvery",
                        "type": "text",
                        "group": "Propensity Bar Chart",
                        "level": 2,
                        "inline": true,
                        "label": "Toby Carvery"
                    },
                    {
                        "field": "vintage_inns",
                        "type": "text",
                        "group": "Propensity Bar Chart",
                        "level": 2,
                        "inline": true,
                        "label": "Vintage Inns"
                    },
                    {
                        "field": "dry_perc",
                        "type": "text",
                        "group": "Financial Details",
                        "level": 2,
                        "inline": true,
                        "label": "Dry %"
                    },
                    {
                        "field": "wet_perc",
                        "type": "text",
                        "group": "Financial Details",
                        "level": 2,
                        "inline": true,
                        "label": "Wet %"
                    },
                    {
                        "field": "aws_18",
                        "type": "text",
                        "group": "Financial Details",
                        "level": 2,
                        "inline": true,
                        "label": "Average Weekly Sales 2018"
                    },
                    {
                        "label": "Total Sales Figures",
                        "type": "group",
                        "chart":
                        {
                            "x": "Days of the Week",
                            "y": "%",
                            "active": "true",
                            "height": 300
                        }
                    },
                    {
                        "field": "monday_perc",
                        "type": "numeric",
                        "group": "Total Sales Figures",
                        "level": 2,
                        "inline": true,
                        "postfix": " %",
                        "label": "M"
                    },
                    {
                        "field": "tuesday_perc",
                        "type": "numeric",
                        "group": "Total Sales Figures",
                        "level": 2,
                        "inline": true,
                        "postfix": " %",
                        "label": "T"
                    },
                    {
                        "field": "wednesday_perc",
                        "type": "numeric",
                        "group": "Total Sales Figures",
                        "level": 2,
                        "inline": true,
                        "postfix": " %",
                        "label": "W"
                    },
                    {
                        "field": "thursday_perc",
                        "type": "numeric",
                        "group": "Total Sales Figures",
                        "level": 2,
                        "inline": true,
                        "postfix": " %",
                        "label": "T"
                    },
                    {
                        "field": "friday_perc",
                        "type": "numeric",
                        "group": "Total Sales Figures",
                        "level": 2,
                        "inline": true,
                        "postfix": " %",
                        "label": "F"
                    },
                    {
                        "field": "saturday_perc",
                        "type": "numeric",
                        "group": "Total Sales Figures",
                        "level": 2,
                        "inline": true,
                        "postfix": " %",
                        "label": "S"
                    },
                    {
                        "field": "sunday_perc",
                        "type": "numeric",
                        "group": "Total Sales Figures",
                        "level": 2,
                        "inline": true,
                        "postfix": " %",
                        "label": "SU"
                    },
                    {
                        "label": "Available tableviews",
                        "type": "label",
                        "hideInReport": true
                    },
                    {
                        "type": "tableDefinition",
                        "title": "Population Summary",
                        "display": true,
                        "target_id": "xyz_table1",
                        "columns": [
                        {
                            "type": "integer",
                            "title": "0-5 mins",
                            "field": "min5",
                            "lookup":
                            {
                                "table_a": "mb.mb_pub_jan_2019",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_5min",
                                "geom_b": "geom_4326"
                            }
                        },
                        {
                            "type": "integer",
                            "title": "0-10 mins",
                            "field": "min10",
                            "lookup":
                            {
                                "table_a": "mb.mb_pub_jan_2019",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_10min",
                                "geom_b": "geom_4326"
                            }
                        },
                        {
                            "type": "integer",
                            "title": "0-15 mins",
                            "field": "min15",
                            "lookup":
                            {
                                "table_a": "mb.mb_pub_jan_2019",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_15min",
                                "geom_b": "geom_4326"
                            }
                        }],
                        "rows": [
                        {
                            "field": "pop__17",
                            "fieldfx": "SUM(b.pop__17)",
                            "title": "Current Population"
                        },
                        {
                            "field": "pop__11",
                            "fieldfx": "SUM(b.pop__11)",
                            "title": "Population 2011"
                        },
                        {
                            "field": "pop_growth",
                            "fieldfx": "SUM(b.pop__17 - b.pop__11) * 100 / SUM(b.pop__11)",
                            "title": "Population Growth"
                        },
                        {
                            "field": "students",
                            "fieldfx": "SUM(eac_student__11) + SUM(ein_student__11)",
                            "title": "Students"
                        },
                        {
                            "field": "non_white",
                            "fieldfx": "100*(SUM(pop__11) - SUM(ret_white_tot__11))/SUM(pop__11)",
                            "title": "% Non-White"
                        },
                        {
                            "field": "own_home",
                            "fieldfx": "100*SUM(own)/SUM(own+rent+social)",
                            "title": "Own Home"
                        },
                        {
                            "field": "private_rented",
                            "fieldfx": "100*SUM(rent)/SUM(own+rent+social)",
                            "title": "Private Rented"
                        },
                        {
                            "field": "social_rented",
                            "fieldfx": "100*SUM(social)/SUM(own+rent+social)",
                            "title": "Social Rented"
                        },
                        {
                            "field": "single_hhds",
                            "fieldfx": "100*SUM(pers1hhd)/SUM(pers1hhd+pers2hhd+pers2plushhd)",
                            "title": "Single Hhds"
                        },
                        {
                            "field": "hhds_two_ppl",
                            "fieldfx": "100*SUM(pers2hhd)/SUM(pers1hhd+pers2hhd+pers2plushhd)",
                            "title": "2 Person Hhds"
                        },
                        {
                            "field": "hhds_3plus",
                            "fieldfx": "100*SUM(pers2plushhd)/SUM(pers1hhd+pers2hhd+pers2plushhd)",
                            "title": "3+ Hhds"
                        }]
                    },
                    {
                        "type": "tableDefinition",
                        "title": "Worker Summary",
                        "display": true,
                        "target_id": "xyz_table8",
                        "columns": [
                        {
                            "type": "integer",
                            "title": "Total Workers",
                            "field": "workers",
                            "lookup":
                            {
                                "table_a": "mb.mb_pub_jan_2019",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_15min",
                                "geom_b": "geom_4326"
                            }
                        }],
                        "rows": [
                        {
                            "field": "workers_250",
                            "fieldfx": "SUM(case when ST_distance(ST_Transform(a.geom_4326,27700),ST_transform(b.geom_p_4326,27700))<=250 then b.workers else 0 end)",
                            "title": "Workers 250m"
                        },
                        {
                            "field": "workers_500",
                            "fieldfx": "SUM(case when ST_distance(ST_Transform(a.geom_4326,27700),ST_transform(b.geom_p_4326,27700))<=500 then b.workers else 0 end)",
                            "title": "Workers 500m"
                        }]
                    },
                    {
                        "type": "tableDefinition",
                        "title": "Age Profile",
                        "display": true,
                        "target_id": "xyz_table2",
                        "columns": [
                        {
                            "type": "integer",
                            "title": "0-5 mins",
                            "field": "min5",
                            "lookup":
                            {
                                "table_a": "mb.mb_pub_jan_2019",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_5min",
                                "geom_b": "geom_4326"
                            }
                        },
                        {
                            "type": "integer",
                            "title": "0-10 mins",
                            "field": "min10",
                            "lookup":
                            {
                                "table_a": "mb.mb_pub_jan_2019",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_10min",
                                "geom_b": "geom_4326"
                            }
                        },
                        {
                            "type": "numeric",
                            "title": "0-15 mins",
                            "field": "min15",
                            "lookup":
                            {
                                "table_a": "mb.mb_pub_jan_2019",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_15min",
                                "geom_b": "geom_4326"
                            }
                        },
                        {
                            "type": "numeric",
                            "field": "uk",
                            "aspatial": "age_under_18_uk, age_18to24_uk, age_25to29_uk, age_30to44_uk, age_45to59_uk, age_60plus_uk, age_total_uk FROM mb.report_summary"
                        }],
                        "rows": [
                        {
                            "field": "age_under_18",
                            "title": "< 18",
                            "fieldfx": "round(SUM(pop__11 - age_18to19__11 - age_20to24__11 - age_25to29__11 - age_30to44__11 - age_45to59__11 - age60plus))"
                        },
                        {
                            "field": "age_18to24",
                            "fieldfx": "round(SUM(age_18to19__11 + age_20to24__11))",
                            "title": "18 to 24"
                        },
                        {
                            "field": "age_25to29",
                            "fieldfx": "round(SUM(age_25to29__11))",
                            "title": "25 to 29"
                        },
                        {
                            "field": "age_30to44",
                            "fieldfx": "round(SUM(age_30to44__11))",
                            "title": "30 to 44"
                        },
                        {
                            "field": "age_45to59",
                            "fieldfx": "round(SUM(age_45to59__11))",
                            "title": "45 to 59"
                        },
                        {
                            "field": "age_60plus",
                            "fieldfx": "round(SUM(age60plus))",
                            "title": "60+"
                        },
                        {
                            "field": "age_profile_total",
                            "fieldfx": "round(SUM(pop__11))",
                            "title": "Total"
                        }],
                        "agg":
                        {
                            "share15":
                            {
                                "title": "% with 15 min",
                                "type": "integer",
                                "rows": [
                                    "100*min15.age_under_18/min15.age_profile_total",
                                    "100*min15.age_18to24/min15.age_profile_total",
                                    "100*min15.age_25to29/min15.age_profile_total",
                                    "100*min15.age_30to44/min15.age_profile_total",
                                    "100*min15.age_45to59/min15.age_profile_total",
                                    "100*min15.age_60plus/min15.age_profile_total",
                                    "100*min15.age_profile_total/min15.age_profile_total"
                                ]
                            },
                            "age_uk_total":
                            {
                                "title": "UK %",
                                "type": "integer",
                                "rows": [
                                    "uk.age_under_18_uk*100/uk.age_total_uk",
                                    "uk.age_18to24_uk*100/uk.age_total_uk",
                                    "uk.age_25to29_uk*100/uk.age_total_uk",
                                    "uk.age_30to44_uk*100/uk.age_total_uk",
                                    "uk.age_45to59_uk*100/uk.age_total_uk",
                                    "uk.age_60plus_uk*100/uk.age_total_uk",
                                    "uk.age_total_uk*100/uk.age_total_uk"
                                ]
                            },
                            "age_index":
                            {
                                "title": "Age Profile Index",
                                "type": "integer",
                                "formatter": "progress",
                                "formatterParams":
                                {
                                    "color": [
                                        "#2196f3", "orange", "red"
                                    ],
                                    "max": 250
                                },
                                "width": 200,
                                "sorter": "number",
                                "rows": [
                                    "uk.age_total_uk*(100*min15.age_under_18/min15.age_profile_total)/uk.age_under_18_uk",
                                    "uk.age_total_uk*(100*min15.age_18to24/min15.age_profile_total)/uk.age_18to24_uk",
                                    "uk.age_total_uk*(100*min15.age_25to29/min15.age_profile_total)/uk.age_25to29_uk",
                                    "uk.age_total_uk*(100*min15.age_30to44/min15.age_profile_total)/uk.age_30to44_uk",
                                    "uk.age_total_uk*(100*min15.age_45to59/min15.age_profile_total)/uk.age_45to59_uk",
                                    "uk.age_total_uk*(100*min15.age_60plus/min15.age_profile_total)/uk.age_60plus_uk",
                                    "uk.age_total_uk*(100*min15.age_profile_total/min15.age_profile_total)/uk.age_total_uk"
                                ]
                            }
                        }
                    },
                    {
                        "type": "tableDefinition",
                        "title": "Social Grade",
                        "display": true,
                        "target_id": "xyz_table4",
                        "columns": [
                        {
                            "type": "integer",
                            "title": "0-5 mins",
                            "field": "min5",
                            "lookup":
                            {
                                "table_a": "mb.mb_pub_jan_2019",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_5min",
                                "geom_b": "geom_4326"
                            }
                        },
                        {
                            "type": "integer",
                            "title": "0-10 mins",
                            "field": "min10",
                            "lookup":
                            {
                                "table_a": "mb.mb_pub_jan_2019",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_10min",
                                "geom_b": "geom_4326"
                            }
                        },
                        {
                            "type": "numeric",
                            "title": "0-15 mins",
                            "field": "min15",
                            "lookup":
                            {
                                "table_a": "mb.mb_pub_jan_2019",
                                "table_b": "geodata.uk_glx_geodata_hex_1k",
                                "geom_a": "isoline_15min",
                                "geom_b": "geom_p_4326"
                            }
                        },
                        {
                            "type": "numeric",
                            "field": "uk",
                            "aspatial": "social_grade_ab_uk, social_grade_c1_uk, social_grade_c2_uk, social_grade_de_uk, social_grade_total_uk FROM mb.report_summary"
                        }],
                        "rows": [
                        {
                            "field": "sg_ab",
                            "fieldfx": "round(SUM(ski_ab__11))",
                            "title": "AB"
                        },
                        {
                            "field": "sg_c1",
                            "fieldfx": "round(SUM(ski_c1__11))",
                            "title": "C1"
                        },
                        {
                            "field": "sg_c2",
                            "fieldfx": "round(SUM(ski_c2__11))",
                            "title": "C2"
                        },
                        {
                            "field": "sg_de",
                            "fieldfx": "round(SUM(ski_de__11))",
                            "title": "DE"
                        },
                        {
                            "field": "sg_total",
                            "fieldfx": "round(SUM(ski_hrp_base__11))",
                            "title": "Total"
                        }],
                        "agg":
                        {
                            "share15":
                            {
                                "title": "% with 15 min",
                                "type": "integer",
                                "rows": [
                                    "100*min15.sg_ab/min15.sg_total",
                                    "100*min15.sg_c1/min15.sg_total",
                                    "100*min15.sg_c2/min15.sg_total",
                                    "100*min15.sg_de/min15.sg_total",
                                    "100*min15.sg_total/min15.sg_total"
                                ]
                            },
                            "sg_uk_total":
                            {
                                "title": "UK %",
                                "type": "integer",
                                "rows": [
                                    "uk.social_grade_ab_uk*100/uk.social_grade_total_uk",
                                    "uk.social_grade_c1_uk*100/uk.social_grade_total_uk",
                                    "uk.social_grade_c2_uk*100/uk.social_grade_total_uk",
                                    "uk.social_grade_de_uk*100/uk.social_grade_total_uk",
                                    "uk.social_grade_total_uk*100/uk.social_grade_total_uk"
                                ]
                            },
                            "sg_index":
                            {
                                "title": "Social Grade Index",
                                "type": "integer",
                                "formatter": "progress",
                                "formatterParams":
                                {
                                    "color": [
                                        "#2196f3", "orange", "red"
                                    ],
                                    "max": 250
                                },
                                "width": 200,
                                "sorter": "number",
                                "rows": [
                                    "uk.social_grade_total_uk*(100*min15.sg_ab/min15.sg_total)/uk.social_grade_ab_uk",
                                    "uk.social_grade_total_uk*(100*min15.sg_c1/min15.sg_total)/uk.social_grade_c1_uk",
                                    "uk.social_grade_total_uk*(100*min15.sg_c2/min15.sg_total)/uk.social_grade_c2_uk",
                                    "uk.social_grade_total_uk*(100*min15.sg_de/min15.sg_total)/uk.social_grade_de_uk",
                                    "uk.social_grade_total_uk*(100*min15.sg_total/min15.sg_total)/uk.social_grade_total_uk"
                                ]
                            }
                        }
                    },
                    {
                        "type": "streetview"
                    },
                    {
                        "field": "images",
                        "type": "images",
                        "edit": true
                    },
                    {
                        "type": "orderedList",
                        "title": "Nearest competitors",
                        "display": true,
                        "table": "mb.cga_address_geocoded",
                        "geom": "geom",
                        "columns": [
                        {
                            "field": "dpname",
                            "title": "Competitor name"
                        },
                        {
                            "field": "dpownergro",
                            "title": "Owner group"
                        },
                        {
                            "field": "licname",
                            "title": "Licence"
                        },
                        {
                            "field": "centrotype",
                            "title": "Type"
                        },
                        {
                            "field": "postcode",
                            "title": "Postcode"
                        },
                        {
                            "type": "integer",
                            "geography": true,
                            "title": "Distance (m)",
                            "fx": "ST_DISTANCE",
                            "field": "dist",
                            "orderby": true
                        }],
                        "limit": 20
                    },
                    {
                        "type": "orderedList",
                        "title": "Nearest MB Pubs",
                        "display": true,
                        "table": "mb.mb_pub_jan_2019",
                        "geom": "geom_4326",
                        "columns": [
                        {
                            "field": "name",
                            "title": "Name"
                        },
                        {
                            "field": "brand",
                            "title": "Brand"
                        },
                        {
                            "field": "post_code",
                            "title": "Post Code"
                        },
                        {
                            "field": "location_type",
                            "title": "Location Type"
                        },
                        {
                            "type": "integer",
                            "geography": true,
                            "title": "Distance (m)",
                            "fx": "ST_DISTANCE",
                            "field": "dist",
                            "orderby": true
                        }],
                        "limit": 20
                    }],
                    "style":
                    {
                        "marker":
                        {
                            "type": "target",
                            "fillColor": "#BFC9CA"
                        },
                        "markerMulti":
                        {
                            "type": "target",
                            "fillColor": "#d51b42"
                        },
                        "markerMin": 40,
                        "markerMax": 60,
                        "anchor": [20, 40],
                        "themes":
                        {
                            "Brand":
                            {
                                "label": "Brand",
                                "type": "categorized",
                                "field": "brand",
                                "other": true,
                                "cat":
                                {
                                    "All Bar One":
                                    {
                                        "label": "All Bar One",
                                        "svg": "https://raw.githubusercontent.com/GEOLYTIX/MapIcons/master/poi_pubs/all_bar_one.svg?sanitize=true"
                                    },
                                    "Browns":
                                    {
                                        "label": "Browns",
                                        "svg": "https://raw.githubusercontent.com/GEOLYTIX/MapIcons/master/poi_pubs/browns.svg?sanitize=true"
                                    },
                                    "Castle":
                                    {
                                        "label": "Castle",
                                        "svg": "https://raw.githubusercontent.com/GEOLYTIX/MapIcons/master/poi_pubs/castle.svg?sanitize=true"
                                    },
                                    "Ember":
                                    {
                                        "label": "Ember",
                                        "svg": "https://raw.githubusercontent.com/GEOLYTIX/MapIcons/master/poi_pubs/ember.svg?sanitize=true"
                                    },
                                    "Harvester":
                                    {
                                        "label": "Harvester",
                                        "svg": "https://raw.githubusercontent.com/GEOLYTIX/MapIcons/master/poi_pubs/harvester.svg?sanitize=true"
                                    },
                                    "Miller and Carter":
                                    {
                                        "label": "Miller & Carter",
                                        "svg": "https://raw.githubusercontent.com/GEOLYTIX/MapIcons/master/poi_pubs/miller_carter.svg?sanitize=true"
                                    },
                                    "Nicholsons":
                                    {
                                        "label": "Nicholsons",
                                        "svg": "https://raw.githubusercontent.com/GEOLYTIX/MapIcons/master/poi_pubs/nicholsons.svg?sanitize=true"
                                    },
                                    "Oak Tree":
                                    {
                                        "label": "Oak Tree",
                                        "svg": "https://raw.githubusercontent.com/GEOLYTIX/MapIcons/master/poi_pubs/oaktree.svg?sanitize=true"
                                    },
                                    "ONeills":
                                    {
                                        "label": "O'Neill's",
                                        "svg": "https://raw.githubusercontent.com/GEOLYTIX/MapIcons/master/poi_pubs/oneills.svg?sanitize=true"
                                    },
                                    "PCDG":
                                    {
                                        "label": "PCDG",
                                        "svg": "https://raw.githubusercontent.com/GEOLYTIX/MapIcons/master/poi_pubs/premium_country.svg?sanitize=true"
                                    },
                                    "Sizzling Pubs":
                                    {
                                        "label": "Sizzling Pubs",
                                        "svg": "https://raw.githubusercontent.com/GEOLYTIX/MapIcons/master/poi_pubs/sizzling.svg?sanitize=true"
                                    },
                                    "Toby Carvery":
                                    {
                                        "label": "Toby Carvery",
                                        "svg": "https://raw.githubusercontent.com/GEOLYTIX/MapIcons/master/poi_pubs/toby.svg?sanitize=true"
                                    },
                                    "Vintage Inns":
                                    {
                                        "label": "Vintage Inns",
                                        "svg": "https://raw.githubusercontent.com/GEOLYTIX/MapIcons/master/poi_pubs/vintage.svg?sanitize=true"
                                    },
                                    "Stonehouse Pizza and Carvery":
                                    {
                                        "label": "Stonehouse Pizza & Carvery",
                                        "svg": "https://raw.githubusercontent.com/GEOLYTIX/MapIcons/master/poi_pubs/stonehouse.svg?sanitize=true"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}