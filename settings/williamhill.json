{
  "title": "GEOLYTIX | William Hill",
  "select": {},
  "gazetteer": {},
  "report": {},
  "locales": {
    "GB": {
      "gazetteer": [
        "GOOGLE",
        "GB",
        "",
        "e.g. London"
      ],
      "bounds": [
        [
          48,
          -11.5
        ],
        [
          62,
          5
        ]
      ],
      "minZoom": 6,
      "maxZoom": 17,
      "layers": {
        "base": {
          "display": true,
          "name": "Mapbox Baselayer",
          "pane": [
            "base",
            500
          ],
          "format": "tiles",
          "URI": "https://api.mapbox.com/styles/v1/dbauszus/ciozrimi3002bdsm8bjtn2v1y/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiZGJhdXN6dXMiLCJhIjoiY2pnbTFwNWh3MWwxdjJ4bno5M3pndDNubiJ9.fMKui_Ypb0qJz0r1QzYzGg"
        },
        "label": {
          "display": true,
          "name": "Mapbox Labels",
          "pane": [
            "base_labels",
            560
          ],
          "format": "tiles",
          "URI": "https://api.mapbox.com/styles/v1/dbauszus/cj9puo8pr5o0c2sovhdwhkc7z/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiZGJhdXN6dXMiLCJhIjoiY2pnbTFwNWh3MWwxdjJ4bno5M3pndDNubiJ9.fMKui_Ypb0qJz0r1QzYzGg"
        },
        "here": {
          "name": "HERE Imagery",
          "pane": [
            "base",
            500
          ],
          "format": "tiles",
          "URI": "https://1.aerial.maps.api.here.com/maptile/2.1/maptile/newest/satellite.day/{z}/{x}/{y}/256/png8?",
          "provider": "HERE"
        },
        "here_hybrid": {
          "name": "HERE Hybrid",
          "pane": [
            "base",
            500
          ],
          "format": "tiles",
          "URI": "https://1.aerial.maps.api.here.com/maptile/2.1/maptile/newest/hybrid.day/{z}/{x}/{y}/256/png8?",
          "provider": "HERE"
        },
        "williamhill": {
          "display": true,
          "name": "William Hill Shops",
          "meta": "Shop locations from William Hill.",
          "format": "cluster",
          "pane": [
            "williamhill",
            540
          ],
          "dbs": "XYZ",
          "qID": "id",
          "table": "williamhill_09052018",
          "cluster_label": "shop_name",
          "cluster_cat": "competition",
          "aggregate_layer": "scratch",
          "infoj": [
            {
              "field": "lbo_no",
              "label": "ID",
              "type": "integer"
            },
            {
              "field": "shop_name",
              "label": "Shop name",
              "type": "text",
              "filter": "like"
            },
            {
              "field": "postcode",
              "label": "Postal code",
              "type": "text",
              "filter": "like"
            },
            {
              "field": "wh_region",
              "label": "WH Region",
              "type": "text",
              "filter": "match"
            },
            {
              "field": "wh_area",
              "label": "WH Area",
              "type": "text"
            },
            {
              "field": "wh_cluster",
              "label": "WH Cluster",
              "type": "text"
            },
            {
              "field": "seamless_town",
              "label": "Town",
              "type": "text"
            },
            {
              "field": "region",
              "label": "Area",
              "type": "text"
            },
            {
              "field": "Country",
              "label": "country",
              "type": "text"
            },
            {
              "field": "open_closed",
              "label": "Shop status",
              "type": "text"
            },
            {
              "field": "competition",
              "label": "Type",
              "type": "text"
            },
            {
              "label": "Tenure"
            },
            {
              "field": "tenure",
              "label": "Tenure type",
              "type": "text",
              "level": 1,
              "filter": {
                "in": [
                  "Freehold",
                  "Leasehold"
                ]
              }
            },
            {
              "field": "lease_break2",
              "label": "Lease break date",
              "type": "text",
              "level": 1,
              "filter": "date"
            },
            {
              "field": "lease_expire2",
              "label": "Lease expiry date",
              "type": "text",
              "level": 1,
              "filter": "date"
            },
            {
              "field": "break_v_expire2",
              "label": "Break vs expire date",
              "type": "text",
              "level": 1
            },
            {
              "field": "rent",
              "label": "Rent p.a.",
              "type": "numeric",
              "level": 1,
              "filter": "numeric"
            },
            {
              "label": "EBITDA by year"
            },
            {
              "field": "ebitda_2013",
              "label": "2013",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "ebitda_2014",
              "label": "2014",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "ebitda_2015",
              "label": "2015",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "ebitda_2016",
              "label": "2016",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "ebitda_2017",
              "label": "2017",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "ebitda_plan_2018",
              "label": "Plan 2018",
              "type": "numeric",
              "level": 2
            },
            {
              "label": "Accounting by year 2017"
            },
            {
              "field": "stakes_2017",
              "label": "Stakes",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "gross_win_2017",
              "label": "Gross win",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "margin_pct_2017",
              "label": "Margin (%)",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "gaming_2017",
              "label": "Gaming",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "profit_2017",
              "label": "Shop profit",
              "type": "numeric",
              "level": 2
            },
            {
              "label": "Plan for year 2018"
            },
            {
              "field": "plan_stakes_2018",
              "label": "Stakes",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "plan_gross_win_2018",
              "label": "Gross win",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "plan_margin_pct_2018",
              "label": "Margin (%)",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "plan_profit_2018",
              "label": "Plan profit",
              "type": "numeric",
              "level": 2,
              "filter": "numeric"
            },
            {
              "label": "Forecast 2019"
            },
            {
              "field": "rp_est_stakes_2019",
              "label": "Stakes",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gross_win_2019",
              "label": "Gross win",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_margin_pct_2019",
              "label": "Margin (%)",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gaming_2019",
              "label": "Gaming",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_profit_2019",
              "label": "Shop profit",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_stakes_tri_20_2019",
              "label": "Stakes Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gross_win_tri_20_2019",
              "label": "Gross win Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_margin_pct_tri_20_2019",
              "label": "Margin Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "lost_gross_win_tri_20_2019",
              "label": "Lost gross win Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gaming_tri_20_2019",
              "label": "Gaming Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_profit_tri_20_2019",
              "label": "Profit Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_stakes_tri_2_2019",
              "label": "Stakes Tri £2",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gross_win_tri_2_2019",
              "label": "Gross win Tri £2",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_margin_pct_tri_2_2019",
              "label": "Margin Tri £2 (%)",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "lost_gross_win_tri_2_2019",
              "label": "Lost gross win Tri £2",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gaming_tri_2_2019",
              "label": "Gaming Tri £2",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_profit_tri_2_2019",
              "label": "Profit Tri £2",
              "type": "numeric",
              "level": 2
            },
            {
              "label": "Forecast 2020"
            },
            {
              "field": "rp_est_stakes_2020",
              "label": "Stakes",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gross_win_2020",
              "label": "Gross win",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_margin_pct_2020",
              "label": "Margin (%)",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gaming_2020",
              "label": "Gaming",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_profit_2020",
              "label": "Shop profit",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_stakes_tri_20_2020",
              "label": "Stakes Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gross_win_tri_20_2020",
              "label": "Gross win Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_margin_pct_tri_20_2020",
              "label": "Margin Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "lost_gross_win_tri_20_2020",
              "label": "Lost gross win Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gaming_tri_20_2020",
              "label": "Gaming Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_profit_tri_20_2020",
              "label": "Profit Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_stakes_tri_2_2020",
              "label": "Stakes Tri £2",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gross_win_tri_2_2020",
              "label": "Gross win Tri £2",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_margin_pct_tri_2_2020",
              "label": "Margin Tri £2 (%)",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "lost_gross_win_tri_2_2020",
              "label": "Lost gross win Tri £2",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gaming_tri_2_2020",
              "label": "Gaming Tri £2",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_profit_tri_2_2020",
              "label": "Profit Tri £2",
              "type": "numeric",
              "level": 2
            },
            {
              "label": "Forecast 2021"
            },
            {
              "field": "rp_est_stakes_2021",
              "label": "Stakes",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gross_win_2021",
              "label": "Gross win",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_margin_pct_2021",
              "label": "Margin",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gaming_2021",
              "label": "Gaming",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_profit_2021",
              "label": "Shop profit",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_stakes_tri_20_2021",
              "label": "Stakes Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gross_win_tri_20_2021",
              "label": "Gross win Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_margin_pct_tri_20_2021",
              "label": "Margin Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "lost_gross_win_tri_20_2021",
              "label": "Lost gross win Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gaming_tri_20_2021",
              "label": "Gaming Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_profit_tri_20_2021",
              "label": "Profit Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_stakes_tri_2_2021",
              "label": "Stakes Tri £2",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gross_win_tri_2_2021",
              "label": "Gross win Tri £2",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_margin_pct_tri_2_2021",
              "label": "Margin Tri £2 (%)",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "lost_gross_win_tri_2_2021",
              "label": "Lost gross win Tri £2",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gaming_tri_2_2021",
              "label": "Gaming Tri £2",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_profit_tri_2_2021",
              "label": "Profit Tri £2",
              "type": "numeric",
              "level": 2
            },
            {
              "label": "Forecast 2022"
            },
            {
              "field": "rp_est_stakes_2022",
              "label": "Stakes",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gross_win_2022",
              "label": "Gross win",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_margin_pct_2022",
              "label": "Margin (%)",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gaming_2022",
              "label": "Gaming",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_profit_2022",
              "label": "Shop profit",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_stakes_tri_20_2022",
              "label": "Stakes Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gross_win_tri_20_2022",
              "label": "Gross win Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_margin_pct_tri_20_2022",
              "label": "Margin Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "lost_gross_win_tri_20_2022",
              "label": "Lost gross win Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gaming_tri_20_2022",
              "label": "Gaming Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_profit_tri_20_2022",
              "label": "Profit Tri £20",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_stakes_tri_2_2022",
              "label": "Stakes Tri £2",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gross_win_tri_2_2022",
              "label": "Gross win Tri £2",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_margin_pct_tri_2_2022",
              "label": "Margin Tri £2 (%)",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "lost_gross_win_tri_2_2022",
              "label": "Lost gross win Tri £2",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_gaming_tri_2_2022",
              "label": "Gaming Tri £2",
              "type": "numeric",
              "level": 2
            },
            {
              "field": "rp_est_profit_tri_2_2022",
              "label": "Profit Tri £2",
              "type": "numeric",
              "level": 2
            }
          ],
          "cluster_kmeans": 50,
          "cluster_dbscan": 0.01,
          "style": {
            "markerMin": 15,
            "markerMax": 70,
            "marker": "svg_symbols.target([400,'#bbb'])",
            "markerMulti": [
              400,
              "#bbb"
            ],
            "theme": {
              "label": "Game",
              "type": "categorized",
              "competitors": {
                "MONOPOLY": {
                  "colour": "#143156",
                  "label": "Monopoly"
                },
                "MULTI COMP": {
                  "colour": "#FFDE3B",
                  "label": "Multi competiton"
                },
                "SINGLE COMP": {
                  "colour": "#2274A5",
                  "label": "Single competiton"
                }
              },
              "cat": {
                "MONOPOLY": {
                  "marker": "svg_symbols.target([400, '#143156'])",
                  "label": "Monopoly"
                },
                "MULTI COMP": {
                  "marker": "svg_symbols.target([400, '#FFDE3B'])",
                  "label": "Multi competition"
                },
                "SINGLE COMP": {
                  "marker": "svg_symbols.target([400,'#2274A5'])",
                  "label": "Single competition"
                }
              },
              "other": true
            }
          }
        },
        "competitors": {
          "name": "Competitors",
          "meta": "",
          "format": "cluster",
          "pane": [
            "competitors",
            520
          ],
          "dbs": "XYZ",
          "qID": "branchid",
          "table": "williamhill_competitors",
          "cluster_label": "competitor",
          "cluster_cat": "competitor",
          "cluster_dbscan": 0.01,
          "infoj": [
            {
              "field": "branchid",
              "label": "Branch ID",
              "type": "text"
            },
            {
              "field": "competitor",
              "label": "Competitor",
              "type": "text"
            },
            {
              "field": "street_address",
              "label": "Address",
              "type": "text"
            },
            {
              "field": "town",
              "type": "text"
            },
            {
              "field": "suburb",
              "type": "text"
            },
            {
              "field": "postcode",
              "type": "text"
            }
          ],
          "style": {
            "marker": "svg_symbols.target([400, '#fff', 350, '#555'])",
            "markerMulti": [
              400,
              "#777"
            ],
            "theme": {
              "label": "Chain",
              "type": "categorized",
              "competitors": {
                "Ladbrokes": {
                  "colour": "#FE162C",
                  "label": "Ladbrokes"
                },
                "Betfred": {
                  "colour": "#644588",
                  "label": "Betfred"
                },
                "Coral": {
                  "colour": "#68B95A",
                  "label": "Coral"
                }
              },
              "cat": {
                "Betfred": {
                  "marker": "svg_symbols.target([400, '#053770', 300, '#E61C40', 200, '#644588'])",
                  "label": "Betfred"
                },
                "Coral": {
                  "marker": "svg_symbols.target([400, '#68B95A', 300, '#FCD45A', 100, '#E84041'])",
                  "label": ""
                },
                "JenningsBet": {
                  "marker": "svg_symbols.target([400, '#000', 300, '#DB0E2F', 150, '#33DE38'])",
                  "label": ""
                },
                "Ladbrokes": {
                  "marker": "svg_symbols.target([400, '#FE162C', 250, '#FFF'])",
                  "label": ""
                },
                "Paddy Power": {
                  "marker": "svg_symbols.target([400, '#055041', 300, '#65BA50', 100, '#FEFC44'])",
                  "label": ""
                }
              },
              "other": true
            }
          }
        },
        "region": {
          "name": "Regions",
          "pane": [
            "regions",
            520
          ],
          "format": "mvt",
          "dbs": "XYZ",
          "geom_3857": "geom_3857",
          "geomq": "qgeom",
          "qID": "id",
          "infoj": [
            {
              "field": "regionname",
              "label": "Region",
              "type": "text"
            },
            {
              "field": "count.profit_2017",
              "label": "Count Shop profit 2017",
              "type": "integer",
              "layer": "williamhill"
            },
            {
              "field": "sum.profit_2017",
              "label": "Shop profit 2017 (sum)",
              "type": "numeric",
              "layer": "williamhill"
            },
            {
              "field": "avg.profit_2017",
              "label": "Shop profit 2017 (avg)",
              "type": "numeric",
              "layer": "williamhill"
            }
          ],
          "arrayZoom": {
            "6": "gb_region"
          },
          "tilecache": "gb_region__tc",
          "style": {
            "default": {
              "weight": 1,
              "color": "#333",
              "fill": true,
              "opacity": 0.5,
              "fillOpacity": 0
            },
            "highlight": {
              "color": "#EEBA0B",
              "fill": true,
              "opacity": 1,
              "fillOpacity": 0,
              "weight": 1.2
            }
          }
        },
        "scratch": {
        "name": "Filter",
          "pane": [
            "scratch",
            520
          ],
          "format": "geojson",
          "sql_filter": "sql_filter",
          "dbs": "XYZ",
          "table": "williamhill_scratch",
          "arrayZoom": {
            "6": "williamhill_scratch"
          },
          "geomq": "geom",
          "qID": "id",
          "infoj": [
            {
              "field": "id",
              "label": "ID",
              "type": "integer"
            },
            {
              "field": "count.profit_2017",
              "label": "Count Shop profit 2017",
              "type": "integer",
              "layer": "williamhill"
            },
            {
              "field": "sum.profit_2017",
              "label": "Shop profit 2017 (sum)",
              "type": "numeric",
              "layer": "williamhill"
            },
            {
              "field": "avg.profit_2017",
              "label": "Shop profit 2017 (avg)",
              "type": "numeric",
              "layer": "williamhill"
            }
          ]
        },
        "seamless_town": {
          "name": "Towns",
          "pane": [
            "towns",
            521
          ],
          "format": "mvt",
          "dbs": "XYZ",
          "geom_3857": "geom_3857",
          "qID": "id",
          "infoj": [
              {
                  "field": "shoptownid",
                  "label": "Shop town ID",
                  "type": "text"
              },
              {
                  "field": "shop_town",
                  "label": "Shop town",
                  "type": "text",
                  "filter": "like"
              },
              {
                  "field": "u_townname",
                  "label": "Town name",
                  "type": "text"
              },
              {
                  "field": "count.lbo_no",
                  "label": "Count LBO ID",
                  "type": "integer",
                  "layer": "williamhill"
              },
              {
                  "field": "sum.stakes_2017",
                  "label": "Total stakes 2017",
                  "type": "numeric",
                  "layer": "williamhill"
              },
              {
                  "field": "sum.gross_win_2017",
                  "label": "Total gross win 2017",
                  "type": "numeric",
                  "layer": "williamhill"
              },
              {
                  "field": "sum.gaming_2017",
                  "label": "Total gaming 2017",
                  "type": "numeric",
                  "layer": "williamhill"
              },
              {
                  "field": "sum.profit_2017",
                  "label": "Total profit 2017",
                  "type": "numeric",
                  "layer": "williamhill"
              },
              {
                  "field": "sum.plan_stakes_2018",
                  "label": "Total plan stakes 2018",
                  "type": "numeric",
                  "layer": "williamhill"
              },
              {
                  "field": "sum.plan_gross_win_2018",
                  "label": "Total plan gross win 2018",
                  "type": "numeric",
                  "layer": "williamhill"
              },
              {
                  "field": "sum.plan_gaming_2018",
                  "label": "Total plan gaming 2018",
                  "type": "numeric",
                  "layer": "williamhill"
              },
              {
                  "field": "sum.plan_profit_2018",
                  "label": "Total plan profit 2018",
                  "type": "numeric",
                  "layer": "williamhill"
              }
          ],
          "arrayZoom": {
            "11": "seamless_town"
          },
          "tilecache": "seamless_town__tc",
          "style": {
            "default": {
              "weight": 1,
              "color": "#777",
              "fill": true,
              "opacity": 0.5,
              "fillOpacity": 0
            },
            "highlight": {
              "color": "#CD8B76",
              "fill": true,
              "opacity": 1,
              "fillOpacity": 0.3,
              "weight": 1.2
            }
          }
        }
      }
    }
  }
}