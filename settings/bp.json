{
  "title": "GEOLYTIX | BP",
  "select": {},
  "report": {},
  "gazetteer": {},
  "locales": {
    "GB": {
      "gazetteer": ["GOOGLE", "GB", "", "e.g. London"],
      "bounds": [[48, -11.5],[62, 5]],
      "minZoom": 6,
      "maxZoom": 17,
      "layers": {
        "base": {
          "display": true,
          "name": "Mapbox Baselayer",
          "attribution": ["mapbox", "osm"],
          "pane": ["base", 500],
          "format": "tiles",
          "URI" : "https://api.mapbox.com/styles/v1/dbauszus/ciozrimi3002bdsm8bjtn2v1y/tiles/256/{z}/{x}/{y}?",
          "provider": "MAPBOX"
        },
        "label": {
          "display": true,
          "name": "Mapbox Labels",
          "attribution": ["mapbox", "osm"],
          "pane": ["base_labels", 560],
          "format": "tiles",
          "URI" : "https://api.mapbox.com/styles/v1/dbauszus/cj9puo8pr5o0c2sovhdwhkc7z/tiles/256/{z}/{x}/{y}?",
          "provider": "MAPBOX"
        },
        "here": {
          "name": "HERE Imagery",
          "attribution": ["here"],
          "pane": ["base", 500],
          "format": "tiles",
          "URI" : "https://1.aerial.maps.api.here.com/maptile/2.1/maptile/newest/satellite.day/{z}/{x}/{y}/256/png8?",
          "provider": "HERE"
        },
        "here_hybrid": {
          "name": "HERE Hybrid",
          "attribution": ["here"],
          "pane": ["base", 500],
          "format": "tiles",
          "URI" : "https://1.aerial.maps.api.here.com/maptile/2.1/maptile/newest/hybrid.day/{z}/{x}/{y}/256/png8?",
          "provider": "HERE"
        },
        "catalist_opp": {
          "display": true,
          "name": "Fuel Stations (Catalist)",
          "meta": "Station locations and branding from Experian-Catalist dataset.",
          "format": "cluster",
          "pane": ["catalist_opp", 540],
          "dbs": "XYZ",
          "table": "bp.catalist_opp",
          "cluster_label": "sitename",
          "cluster_cat": "sharebrand",
          "infoj": [
            {
              "field": "sitename",
              "label": "Site",
              "type": "text"
            },
            {
              "field": "sitestatus",
              "label": "Status",
              "type": "text"
            },
            {
              "field": "brand",
              "label": "Brand",
              "type": "text"
            },
            {
              "field": "sharebrand",
              "label": "Brand (share)",
              "type": "text"
            },
            {
              "field": "shopbrand",
              "label": "Brand (shop)",
              "type": "text"
            },
            {
              "field": "ownership",
              "label": "Ownership",
              "type": "text"
            },
            {
              "field": "companynam",
              "label": "Company",
              "type": "text"
            },
            {
              "field": "plotsizear",
              "label": "Plot Size",
              "type": "integer"
            },
            {
              "field": "mfvolume",
              "label": "MF Volume",
              "type": "integer"
            },
            {
              "field": "shoparea",
              "label": "Shop area",
              "type": "integer"
            },
            {
              "field": "ms_rank",
              "label": "Rank MS",
              "type": "numeric"
            },
            {
              "field": "bp_rank",
              "label": "Rank BP",
              "type": "numeric"
            }
          ],
          "style": {
            "marker": "svg_symbols.target([400, '#fff', 350, '#fff'])",
            "markerMulti": [400, "#333"],
            "theme": {
              "label": "Brand",
              "type": "categorized",
              "competitors": {
                "BP": {
                  "colour": "#0A9700",
                  "label": "BP"
                },
                "SHELL": {
                  "colour": "#FFD400",
                  "label": "Shell"
                },
                "ESSO": {
                  "colour": "#1853A4",
                  "label": "ESSO"
                }
              },
              "other": true,
              "cat": {
                "BP": {
                  "marker": "svg_symbols.target([400,'#0A9700',300,'#98CB00',200,'#FFFF00',100,'fff'])",
                  "label": "BP"
                },
                "APPLEGREEN": {
                  "marker": "svg_symbols.target([400,'#516E36',300,'#7ABF46'])",
                  "label": "applegreen"
                },
                "ASDA": {
                  "marker": "svg_symbols.target([400,'#83b923',200,'#fff',150,'#fdb839'])",
                  "label": "ASDA"
                },
                "CERTAS ENERGY": {
                  "marker": "svg_symbols.target([400,'#4F2B82',250,'#8ED4E0',150,'#10B3CA'])",
                  "label": "certas energy"
                },
                "ESSAR": {
                  "marker": "svg_symbols.target([400,'#FD1900',300,'#FE5D00',200,'#222'])",
                  "label": "ESSAR"
                },
                "ESSO": {
                  "marker": "svg_symbols.target([400,'#1853A4',300,'#FFF',150,'#D90D18'])",
                  "label": "Esso"
                },
                "GLEANER": {
                  "marker": "svg_symbols.target([400,'#313584',250,'#D90D18',150,'#FFFF4D'])",
                  "label": "Gleaner"
                },
                "HARVEST ENERGY": {
                  "marker": "svg_symbols.target([400,'#0E77C9',200,'#51B749'])",
                  "label": "Harvest energy"
                },
                "JET": {
                  "marker": "svg_symbols.target([400,'#0B4692',300,'#FDC400'])",
                  "label": "JET"
                },
                "MAXOL": {
                  "marker": "svg_symbols.target([400,'#B20C5F',300,'#EA5813',250,'#FBD100',150,'#125EA0'])",
                  "label": "MAXOL"
                },
                "MORRISONS": {
                  "marker": "svg_symbols.target([400,'#ffe133',200,'#00614e'])",
                  "label": "Morrisons"
                },
                "MURCO": {
                  "marker": "svg_symbols.target([400,'#E42039',200,'#fff',100,'#0A407E'])",
                  "label": "MURCO"
                },
                "RIX": {
                  "marker": "svg_symbols.target([400,'#95B0DC',250,'#EC2431',150,'#5188C6'])",
                  "label": "Rix"
                },
                "SAINSBURYS": {
                  "marker": "svg_symbols.target([400,'#ee8a00',250,'#ffffff',150,'#ee8a00'])",
                  "label": "Sainsbury's"
                },
                "SHELL": {
                  "marker": "svg_symbols.target([400,'#EC2427',300,'#FFD400'])",
                  "label": "Shell"
                },
                "SOLO": {
                  "marker": "svg_symbols.target([400,'#2D903A',350,'#F06722',200,'#E72E24',100,'#65318D'])",
                  "label": "solo petroleum"
                },
                "STAR": {
                  "marker": "svg_symbols.target([400,'#E10D1E',300,'#fff',200,'#07603C',100,'#E10D1E'])",
                  "label": "star"
                },
                "TESCO": {
                  "marker": "svg_symbols.target([400,'#0055a8',300,'#fff',250,'#f02f26'])",
                  "label": "Tesco"
                },
                "TEXACO": {
                  "marker": "svg_symbols.target([400,'#EA3231',300,'#fff',250,'#EA3231',150,'#000'])",
                  "label": "TEXACO"
                },
                "THAMES": {
                  "marker": "svg_symbols.target([400,'#E73D41',200,'#fff',100,'#FFB18A'])",
                  "label": "Thames"
                },
                "TOPAZ": {
                  "marker": "svg_symbols.target([400,'#DAB02E',350,'#376EB7',200,'#88C068',100,'#376EB7'])",
                  "label": "TOPAZ"
                },
                "CLOSED": {
                  "marker": "svg_symbols.target([400,'#C60000'])",
                  "label": "Closed"
                },
                "UNBRANDED": {
                  "marker": "svg_symbols.target([400,'#ddd'])",
                  "label": "Unbranded"
                }
              }
            }
          }
        },
        "catalist_opp_bp": {
          "name": "BP/M&S sites",
          "meta": "BP/M&S fuel station locations only.",
          "format": "cluster",
          "pane": ["catalist_opp", 540],
          "dbs": "XYZ",
          "table": "bp.ms_sites",
          "qID": "id",
          "cluster_label": "site_name",
          "cluster_cat": "sharebrand",
          "infoj": [
            {
              "field": "ms_id",
              "label": "ID",
              "type": "text"
            },
            {
              "field": "site_name",
              "label": "Site",
              "type": "text"
            },
            {
              "field": "street",
              "label": "Street",
              "type": "text"
            },
            {
              "field": "postcode",
              "label": "Postcode",
              "type": "text"
            },
            {
              "field": "suburb",
              "label": "Suburb",
              "type": "text"
            },
            {
              "field": "town",
              "label": "Town",
              "type": "text"
            }
          ],
          "style": {
            "marker": "svg_symbols.target([400,'#0A9700',300,'#98CB00',200,'#FFFF00',100,'fff'])"
          }
        },
        "region": {
          "name": "Regions",
          "pane": ["bounds",510],
          "format": "mvt",
          "dbs": "XYZ",
          "geom_3857": "geom_3857",
          "qID": "id",
          "infoj": [
            {
              "field": "regionname",
              "label": "Region",
              "type": "text"
            }
          ],
          "arrayZoom": {
            "6": "bp_region"
          },
          "tilecache": "bp_region__tc",
          "style": {
            "default": {
              "weight": 1,
              "color": "#000"
            },
            "highlight": {
              "color": "#e91e63"
            }
          }
        },
        "oa": {
          "name": "Opportunity Rank (regional)",
          "meta": "Rank from 1 to 10, with 1 being the top 10% of locations, 10 being in the lowest 10% of locations.",
          "pane": ["bounds",510],
          "format": "mvt",
          "geom_3857": "geom_3857",
          "geomj": "geomj",
          "dbs": "XYZ",
          "qID": "id",
          "properties": "rank_reg,",
          "infoj": [
            {
              "field": "oa_code",
              "label": "Code",
              "type": "text"
            },
            {
              "field": "region",
              "label": "Region",
              "type": "text",
              "level": 1
            },
            {
              "field": "rank_reg",
              "label": "Regional Rank",
              "type": "integer"
            },
            {
              "field": "rank_tot",
              "label": "Total Rank",
              "type": "integer"
            }
          ],
          "arrayZoom": {
            "9": "bp_oa_opp_simple"
          },
          "tilecache": "bp_oa_opp_simple__tc",
          "style": {
            "default": {
              "weight": 1,
              "color": "#000",
              "fill": true,
              "fillColor": "#000",
              "fillOpacity": 0.3
            },
            "highlight": {
              "weight": 1,
              "color": "#000"
            },
            "theme": {
              "type": "categorized",
              "field": "rank_reg",
              "cat": {
                "1": {
                  "style": {
                    "stroke": false,
                    "fillColor": "#ca0020",
                    "fill": true,
                    "fillOpacity": 0.3
                  }
                },
                "2": {
                  "style": {
                    "stroke": false,
                    "fillColor": "#dd494b",
                    "fill": true,
                    "fillOpacity": 0.3
                  }
                },
                "3": {
                  "style": {
                    "stroke": false,
                    "fillColor": "#f09377",
                    "fill": true,
                    "fillOpacity": 0.3
                  }
                },
                "4": {
                  "style": {
                    "stroke": false,
                    "fillColor": "#f5c1a9",
                    "fill": true,
                    "fillOpacity": 0.3
                  }
                },
                "5": {
                  "style": {
                    "stroke": false,
                    "fillColor": "#f7e5dd",
                    "fill": true,
                    "fillOpacity": 0.3
                  }
                },
                "6": {
                  "style": {
                    "stroke": false,
                    "fillColor": "#e1ecf2",
                    "fill": true,
                    "fillOpacity": 0.3
                  }
                },
                "7": {
                  "style": {
                    "stroke": false,
                    "fillColor": "#b4d6e7",
                    "fill": true,
                    "fillOpacity": 0.3
                  }
                },
                "8": {
                  "style": {
                    "stroke": false,
                    "fillColor": "#82bcd9",
                    "fill": true,
                    "fillOpacity": 0.3
                  }
                },
                "9": {
                  "style": {
                    "stroke": false,
                    "fillColor": "#4396c5",
                    "fill": true,
                    "fillOpacity": 0.3
                  }
                },
                "10": {
                  "style": {
                    "stroke": false,
                    "fillColor": "#0571b0",
                    "fill": true,
                    "fillOpacity": 0.3
                  }
                }
              }
            }
          }
        },
        "oa_tot": {
          "name": "Opportunity Rank (total)",
          "meta": "Rank from 1 to 10, with 1 being the top 10% of locations, 10 being in the lowest 10% of locations.",
          "pane": ["bounds",510],
          "format": "mvt",
          "geom_3857": "geom_3857",
          "geomj": "geomj",
          "dbs": "XYZ",
          "qID": "id",
          "properties": "rank_tot,",
          "infoj": [
            {
              "field": "oa_code",
              "label": "Code",
              "type": "text"
            },
            {
              "field": "region",
              "label": "Region",
              "type": "text",
              "level": 1
            },
            {
              "field": "rank_reg",
              "label": "Regional Rank",
              "type": "integer"
            },
            {
              "field": "rank_tot",
              "label": "Total Rank",
              "type": "integer"
            }
          ],
          "arrayZoom": {
            "9": "bp_oa_total"
          },
          "tilecache": "bp_oa_total__tc",
          "style": {
            "default": {
              "weight": 1,
              "color": "#000",
              "fill": true,
              "fillColor": "#000",
              "fillOpacity": 0.3
            },
            "highlight": {
              "weight": 1,
              "color": "#000"
            },
            "theme": {
              "field": "rank_tot",
              "type": "categorized",
              "cat": {
                "1": {
                  "style": {
                    "stroke": false,
                    "fillColor": "#ca0020",
                    "fill": true,
                    "fillOpacity": 0.3
                  }
                },
                "2": {
                  "style": {
                    "stroke": false,
                    "fillColor": "#dd494b",
                    "fill": true,
                    "fillOpacity": 0.3
                  }
                },
                "3": {
                  "style": {
                    "stroke": false,
                    "fillColor": "#f09377",
                    "fill": true,
                    "fillOpacity": 0.3
                  }
                },
                "4": {
                  "style": {
                    "stroke": false,
                    "fillColor": "#f5c1a9",
                    "fill": true,
                    "fillOpacity": 0.3
                  }
                },
                "5": {
                  "style": {
                    "stroke": false,
                    "fillColor": "#f7e5dd",
                    "fill": true,
                    "fillOpacity": 0.3
                  }
                },
                "6": {
                  "style": {
                    "stroke": false,
                    "fillColor": "#e1ecf2",
                    "fill": true,
                    "fillOpacity": 0.3
                  }
                },
                "7": {
                  "style": {
                    "stroke": false,
                    "fillColor": "#b4d6e7",
                    "fill": true,
                    "fillOpacity": 0.3
                  }
                },
                "8": {
                  "style": {
                    "stroke": false,
                    "fillColor": "#82bcd9",
                    "fill": true,
                    "fillOpacity": 0.3
                  }
                },
                "9": {
                  "style": {
                    "stroke": false,
                    "fillColor": "#4396c5",
                    "fill": true,
                    "fillOpacity": 0.3
                  }
                },
                "10": {
                  "style": {
                    "stroke": false,
                    "fillColor": "#0571b0",
                    "fill": true,
                    "fillOpacity": 0.3
                  }
                }
              }
            }
          }
        },
        "traffic_count": {
          "name": "Traffic",
          "meta": "Department for transport count points.",
          "format": "cluster",
          "pane": ["traffic", 550],
          "dbs": "XYZ",
          "qID": "id",
          "table": "bp_traffic_counts_all",
          "cluster_label": "road_num",
          "cluster_cat": "all_mv_000__16",
          "hover": true,
          "infoj": [
            {
              "field": "cp_type",
              "label": "Type",
              "type": "text",
              "filter": 
                {"in": ["Major", "Minor"]}
            },
            {
              "field": "road_num",
              "label": "Road Number",
              "type": "text",
              "filter": "like" 
            },
            {
              "field": "start_junc",
              "label": "from junction",
              "type": "text"
            },
            {
              "field": "end_junc",
              "label": "to junction",
              "type": "text"
            },
            {
              "field": "len_mi",
              "label": "Segment (miles)",
              "type": "numeric"
            },
            {
              "field": "road_class",
              "label": "Road Class",
              "type": "text",
              "filter": "match"
            },
            {
              "field": "area_cat",
              "label": "Area Category",
              "type": "text"
            },
            {
              "field": "all_mv_14",
              "label": "Annual traffic count 2014",
              "type": "integer",
              "filter": "numeric"
            },
            {
              "field": "all_mv_15",
              "label": "Annual traffic count 2015",
              "type": "integer",
              "filter": "numeric"
            },
            {
              "field": "all_mv_16",
              "label": "Annual traffic count 2016",
              "type": "integer",
              "filter": "numeric"
            }
          ],
          "style": {
            "theme": {
              "label": "Motor vehicles 2016 (000's)",
              "type": "graduated",
              "cat": [
                {
                  "val": 1,
                  "marker": "svg_symbols.target([400,'#fde725'])",
                  "label": "1"
                },
                {
                  "val": 10,
                  "marker": "svg_symbols.target([400,'#8fd744'])",
                  "label": "10"
                },
                {
                  "val": 25,
                  "marker": "svg_symbols.target([400,'#35b779'])",
                  "label": "25"
                },
                {
                  "val": 50,
                  "marker": "svg_symbols.target([400,'#20908d'])",
                  "label": "50"
                },
                {
                  "val": 75,
                  "marker": "svg_symbols.target([400,'#31688e'])",
                  "label": "75"
                },
                {
                  "val": 100,
                  "marker": "svg_symbols.target([400,'#443a83'])",
                  "label": "100"
                },
                {
                  "val": 150,
                  "marker": "svg_symbols.target([400,'#440154'])",
                  "label": "150"
                }
              ]
            }
          }
        }
      }
    }
  }
}